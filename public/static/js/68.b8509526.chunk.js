"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[68],{17116:(e,t,n)=>{n.d(t,{O:()=>r,i:()=>c});var a=n(44864);const o=JSON.parse(localStorage.getItem("portalUserDataToken")||""),r=e=>new Promise(((t,n)=>{try{fetch("".concat(a.u.MAIN_ENDPOINT).concat(e),{method:"get",headers:{Authorization:"Bearer ".concat(o),Accept:"application/json","Content-Type":"application/json"}}).then((e=>{e.json().then((function(e){t(e)}))})).catch((function(e){console.log("Request failed",e)}))}catch(r){console.log("ERR>>>",r)}})),c=(e,t)=>new Promise(((n,r)=>{try{fetch("".concat(a.u.MAIN_ENDPOINT).concat(e),{method:"Post",headers:{Authorization:"Bearer ".concat(o),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{e.json().then((function(e){n(e)}))})).catch((function(e){console.log("Request failed",e)}))}catch(c){console.log("ERR>>>",c)}}))},69068:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var a=n(65043),o=n(15627),r=n(67289),c=n(44864),i=n(57284),l=n(50525),s=n(35696),d=n(89421),u=n(92584),p=n(10804),m=n(82217),f=n(50289),h=n(60521),v=n(25037),y=n(86178),x=n.n(y),g=(n(5766),n(17116)),A=n(424),j=n(70579);let C=new Date,b=x()(C).format("YYYY-MM-DD"),N=x()(C).format("DD-MMM-YYYY");const O=["","Buyerintel","","","BuyerWatchlist","Offers",""],{RangePicker:w}=l.A,D=()=>{const[e,t]=(0,a.useState)([]),[n,l]=(0,a.useState)(!1),[y,C]=(0,a.useState)(!1),[D,P]=(0,a.useState)([]),[S,k]=(0,a.useState)(1),[E,T]=(0,a.useState)(!1),[I,Y]=(0,a.useState)("Offers"),[M,R]=(0,a.useState)({columnKey:"AsOfDate",order:"descend"}),[z,B]=(0,a.useState)(1);(0,a.useEffect)((()=>{F()}),[S,M,I]);let _="";const F=async()=>{var e;T(!0);let n="/api/get-watchlist/".concat(O.indexOf(I),"/").concat(S,"/").concat(M.columnKey,"/").concat("ascend"==M.order?1:0),a=await(0,g.O)(n);var o,r;a&&a.data&&a.data.products&&a.data.products.length>0&&(t(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.products),B(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.rowCnt));"No any watchlist data found"==(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)&&(t([]),B(0)),T(!1)},L=[{title:"Agg Code",dataIndex:"ProductAC4",key:"ProductAC4",sorter:!0,width:100},{title:"Spot Code",dataIndex:"SPOTCode",key:"SPOTCode",sorter:!0,width:100,render:(e,t)=>(0,j.jsx)(s.A,{placement:"topLeft",title:"View Historical Pricing",children:(0,j.jsx)(A.N_,{to:{pathname:"/productanalytics",state:{prod_id:t.ProductAC4,spotid:t.SPOTCode,spotCode:e}},children:e})})},{title:"Description",dataIndex:"ProductDesc",key:"ProductDesc",sorter:!0,width:200},{title:"Pack Size",dataIndex:"PackSize",key:"PackSize",width:100,render:e=>e?i.A.addZero(e):(0,j.jsx)(j.Fragment,{children:"-"}),sorter:!0},{title:"Date",dataIndex:"AsOfDate",key:"AsOfDate",width:100,render:e=>e?x()(e).format("DD-MMM-YYYY"):(0,j.jsx)(j.Fragment,{children:"-"}),sorter:!0},{title:"Supplier Comment",dataIndex:"supplier_comments",key:"supplier_comments",sorter:!0,width:200},{title:"Buyer Comment",dataIndex:"buyer_comments",key:"buyer_comments",sorter:!0,width:200},{title:"Action",dataIndex:"ProductAC4",key:"ProductAC4",fixed:"right",width:100,render:(e,t)=>t.AsOfDate<x()(b).format("YYYY-MM-DD")?(0,j.jsx)(j.Fragment,{}):(0,j.jsx)(s.A,{placement:"topLeft",title:"Remove from watchlist",children:(0,j.jsx)(d.A,{icon:(0,j.jsx)(v.A,{}),onClick:()=>K(t)})})}],K=e=>{fetch("".concat(c.u.MAIN_ENDPOINT,"/api/remove-from-watchlist/").concat(e.watchlist_id),{method:"put",headers:{Authorization:"Bearer ".concat(_),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.status,e.json().then((function(e){1==e.success&&(o.Ay.success(e.data),F())}))})).catch((function(e){console.log("Fetch Error :-S",e)}))};return _=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"pt-4 m-2",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsxs)("div",{className:"card-body py-2 ",children:[(0,j.jsxs)("div",{className:"row m-4 p-2",children:[(0,j.jsx)("div",{className:"col-4",children:(0,j.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,j.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,j.jsxs)("span",{className:"card-label fw-bolder fs-4 mb-1",style:{color:"rgb(138, 38, 80)"},children:["Buyer Defined Watch List ",(0,j.jsxs)(j.Fragment,{children:["(",N,")"]})]})})})}),(0,j.jsx)("div",{className:"col-4",children:(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(s.A,{placement:"topLeft",title:"Notify Reviewer and Pricer",children:(0,j.jsx)(u.A,{title:"Do you want to mark watch list as processed?",onConfirm:async()=>{C(!0);let t={list_type:O.indexOf(I),type:"1",dataCount:e.lenght};await fetch("".concat(c.u.MAIN_ENDPOINT,"/api/notify-user"),{method:"post",headers:{Authorization:"Bearer ".concat(_),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e.json().then((function(e){1==e.success&&(o.Ay.success(e.message),F())}))})).catch((function(e){})),C(!1)},okText:"Yes",cancelText:"No",children:(0,j.jsx)(d.A,{type:"primary",size:"large",loading:y,children:"Notify Reviewer and Pricer"})})})})}),(0,j.jsx)("div",{className:"col-4",children:(0,j.jsxs)("div",{id:"outer",children:[(0,j.jsxs)("div",{className:"inner p-1",children:[" ",(0,j.jsx)(s.A,{placement:"topLeft",title:"Search",children:(0,j.jsx)(d.A,{type:"primary",size:"large",onClick:()=>{l(!0)},children:"Search"})})," "]}),(0,j.jsxs)("div",{className:"inner p-1",children:[(0,j.jsx)(s.A,{placement:"topLeft",title:"Reset",children:(0,j.jsx)(d.A,{type:"primary",size:"large",onClick:()=>{F()},children:"Reset"})})," "]})]})})]}),(0,j.jsxs)("ul",{className:"nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-8 main-table",children:[(0,j.jsx)("li",{className:"nav-item",children:(0,j.jsx)("a",{className:"nav-link text-active-primary pb-4 active","data-bs-toggle":"tab",href:"#Offers",onClick:()=>{Y("Offers"),k(1),R({columnKey:"AsOfDate",order:"descend"})},children:"OFFERS"})}),(0,j.jsx)("li",{className:"nav-item",children:(0,j.jsx)("a",{className:"nav-link text-active-primary pb-4 ","data-bs-toggle":"tab",href:"#BuyerWatchlist",onClick:()=>{Y("BuyerWatchlist"),k(1),R({columnKey:"AsOfDate",order:"descend"})},children:"BUYER WATCHLIST"})}),(0,j.jsx)("li",{className:"nav-item",children:(0,j.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#Buyerintel",onClick:()=>{Y("Buyerintel"),k(1),R({columnKey:"AsOfDate",order:"descend"})},children:"BUYER INTEL"})})]}),(0,j.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,j.jsx)("div",{className:"tab-pane fade show active ",id:I,role:"tabpanel"})}),(0,j.jsx)(r.A,{columns:L,dataSource:e,pagination:!1,loading:E,className:"p-4",size:"large",rowKey:e=>e.pid,onChange:(e,t,n,a)=>{R({...n})}}),(0,j.jsx)("div",{className:"row text-end m-4",children:(0,j.jsx)(p.A,{defaultCurrent:S,total:z,defaultPageSize:20,onChange:e=>k(e)})}),(0,j.jsx)(m.A,{open:n,onCancel:()=>{l(!1)},footer:!1,destroyOnClose:!0,children:(0,j.jsxs)(f.A,{name:"time_related_controls",onFinish:e=>{let n="",a="";if(e.productcode||e.daterange){e.daterange&&(n=x()(e.daterange[0]).format("YYYY-MM-DD"),a=x()(e.daterange[1]).format("YYYY-MM-DD"));var o={prodcode:e.productcode?e.productcode:"",sdate:n||"",edate:a||""};fetch("".concat(c.u.MAIN_ENDPOINT,"/api/search-watchlist/").concat(O.indexOf(I),"/1/AsofDate/0"),{method:"post",headers:{Authorization:"Bearer ".concat(_),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){200!=e.status&&t([]),e.json().then((function(e){1==e.success&&t(e.data.products)}))})).catch((function(e){console.log("Fetch Error :-S",e)})),l(!1)}},style:{maxWidth:600},children:[(0,j.jsx)(f.A.Item,{name:"daterange",label:"From Date - To Date",children:(0,j.jsx)(w,{})}),(0,j.jsx)(f.A.Item,{name:"productcode",label:"Product Code",children:(0,j.jsx)(h.A,{placeholder:"Search Product"})}),(0,j.jsx)(f.A.Item,{children:(0,j.jsx)(d.A,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})})})})}},57284:(e,t,n)=>{n.d(t,{A:()=>o});class a{static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}}a.addZero=e=>{if(null==e)return e;{const t=e;if(!t||""==t||null==t)return;return"."==(null===t||void 0===t?void 0:t.charAt(0))?"0"+t:e}};const o=a},25037:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(89379),o=n(65043);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};var c=n(22172),i=function(e,t){return o.createElement(c.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:r}))};const l=o.forwardRef(i)},92584:(e,t,n)=>{n.d(t,{A:()=>D});var a=n(58168),o=n(5544),r=n(51376),c=n(98139),i=n.n(c),l=n(28678),s=n(25001),d=n(65043),u=n(35296),p=function(e){return e?"function"===typeof e?e():e:null},m=n(83290),f=n(35696),h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n},v=function(e){var t=e.title,n=e.content,a=e.prefixCls;return d.createElement(d.Fragment,null,t&&d.createElement("div",{className:"".concat(a,"-title")},p(t)),d.createElement("div",{className:"".concat(a,"-inner-content")},p(n)))};const y=d.forwardRef((function(e,t){var n=e.prefixCls,o=e.title,r=e.content,c=e._overlay,i=e.placement,l=void 0===i?"top":i,s=e.trigger,p=void 0===s?"hover":s,y=e.mouseEnterDelay,x=void 0===y?.1:y,g=e.mouseLeaveDelay,A=void 0===g?.1:g,j=e.overlayStyle,C=void 0===j?{}:j,b=h(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),N=d.useContext(u.QO).getPrefixCls,O=N("popover",n),w=N(),D=d.useMemo((function(){return c||(o||r?d.createElement(v,{prefixCls:O,title:o,content:r}):null)}),[c,o,r,O]);return d.createElement(f.A,(0,a.A)({placement:l,trigger:p,mouseEnterDelay:x,mouseLeaveDelay:A,overlayStyle:C},b,{prefixCls:O,ref:t,overlay:D,transitionName:(0,m.by)(w,"zoom-big",b.transitionName)}))}));var x=n(12701),g=n(89421),A=n(83085),j=n(38046),C=n(38097),b=n(8376),N=function(e){var t=e.prefixCls,n=e.okButtonProps,o=e.cancelButtonProps,r=e.title,c=e.cancelText,i=e.okText,l=e.okType,s=e.icon,m=e.showCancel,f=void 0===m||m,h=e.close,v=e.onConfirm,y=e.onCancel,x=d.useContext(u.QO).getPrefixCls;return d.createElement(C.A,{componentName:"Popconfirm",defaultLocale:b.A.Popconfirm},(function(e){return d.createElement("div",{className:"".concat(t,"-inner-content")},d.createElement("div",{className:"".concat(t,"-message")},s&&d.createElement("span",{className:"".concat(t,"-message-icon")},s),d.createElement("div",{className:"".concat(t,"-message-title")},p(r))),d.createElement("div",{className:"".concat(t,"-buttons")},f&&d.createElement(g.A,(0,a.A)({onClick:y,size:"small"},o),null!==c&&void 0!==c?c:e.cancelText),d.createElement(j.A,{buttonProps:(0,a.A)((0,a.A)({size:"small"},(0,A.D)(l)),n),actionFn:v,close:h,prefixCls:x("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==i&&void 0!==i?i:e.okText)))}))},O=void 0,w=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const D=d.forwardRef((function(e,t){var n=e.prefixCls,c=e.placement,p=void 0===c?"top":c,m=e.trigger,f=void 0===m?"click":m,h=e.okType,v=void 0===h?"primary":h,g=e.icon,A=void 0===g?d.createElement(r.A,null):g,j=e.children,C=e.overlayClassName,b=e.onOpenChange,D=e.onVisibleChange,P=w(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),S=d.useContext(u.QO).getPrefixCls,k=(0,l.A)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),E=(0,o.A)(k,2),T=E[0],I=E[1],Y=function(e,t){I(e,!0),null===D||void 0===D||D(e,t),null===b||void 0===b||b(e,t)},M=S("popover",n),R=S("popconfirm",n),z=i()(R,C);return d.createElement(y,(0,a.A)({},P,{trigger:f,prefixCls:M,placement:p,onOpenChange:function(t){var n=e.disabled;void 0!==n&&n||Y(t)},open:T,ref:t,overlayClassName:z,_overlay:d.createElement(N,(0,a.A)({okType:v,icon:A},e,{prefixCls:M,close:function(e){Y(!1,e)},onConfirm:function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(O,t)},onCancel:function(t){var n;Y(!1,t),null===(n=e.onCancel)||void 0===n||n.call(O,t)}}))}),(0,x.Ob)(j,{onKeyDown:function(e){var t,n;d.isValidElement(j)&&(null===(n=null===j||void 0===j?void 0:(t=j.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===s.A.ESC&&T&&Y(!1,e)}(e)}}))}))}}]);
//# sourceMappingURL=68.b8509526.chunk.js.map
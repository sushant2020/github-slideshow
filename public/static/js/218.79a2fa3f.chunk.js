"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[218],{24218:(e,s,r)=>{r.r(s),r.d(s,{default:()=>p});var a=r(65043),t=r(44864),c=r(86178),o=r.n(c),n=r(94539),d=r(15627),l=r(5397),i=r(70579);let m="";function p(){const[e,s]=(0,a.useState)([]),[r,c]=(0,a.useState)(!1),[p,u]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[j,g]=(0,a.useState)(!1),[b,N]=(0,a.useState)("PONumber"),[f,y]=(0,a.useState)("Asc"),[v,_]=(0,a.useState)("SupplierCode"),[C,A]=(0,a.useState)("Asc"),[w,O]=(0,a.useState)("RaiseAt"),[S,D]=(0,a.useState)("Asc"),[k,F]=(0,a.useState)("UniqueId"),[T,I]=(0,a.useState)("Asc");(0,a.useEffect)((()=>{P()}),[]);const P=()=>{g(!0),fetch("".concat(t.u.MAIN_ENDPOINT,"/api/all-downloaded-pos"),{method:"get",headers:{Authorization:"Bearer ".concat(m),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){"No any Purchase Order data found"==e.data.error?s([]):s(e.data),g(!1)}))})).catch((function(e){}))},M=e=>{u(e.group_id),c(!0),x(e.concerto_reference)},R=r=>{let a=e;switch(r){case"PONumber":return"Asc"==f&&(y("Desc"),a=e.sort(((e,s)=>e.po_num.localeCompare(s.po_num))),s(a)),void("Desc"==f&&(y("Asc"),a=e.sort(((e,s)=>s.po_num.localeCompare(e.po_num))),s(a)));case"SupplierCode":return"Asc"==C&&(A("Desc"),a=e.sort(((e,s)=>e.code.localeCompare(s.code))),s(a)),void("Desc"==C&&(A("Asc"),a=e.sort(((e,s)=>s.code.localeCompare(e.code))),s(a)));case"RaiseAt":return"Asc"==S&&(D("Desc"),a=e.sort(((e,s)=>e.created_at.localeCompare(s.created_at))),s(a)),void("Desc"==S&&(D("Asc"),a=e.sort(((e,s)=>s.created_at.localeCompare(e.created_at))),s(a)));case"UniqueId":return"Asc"==T&&(I("Desc"),a=e.sort(((e,s)=>e.group_num.localeCompare(s.group_num))),s(a)),void("Desc"==T&&(I("Asc"),a=e.sort(((e,s)=>s.group_num.localeCompare(e.group_num))),s(a)))}};return m=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,i.jsx)(a.Fragment,{children:(0,i.jsx)("div",{className:"card card-docs mb-2",style:{minHeight:"700"},children:(0,i.jsx)("div",{className:"card-body fs-6 py-15 px-10 py-lg-15 px-lg-15 text-gray-700",children:(0,i.jsxs)("div",{className:"pb-10",children:[(0,i.jsx)("h1",{className:"anchor fw-bolder mb-5",id:"overview",children:(0,i.jsx)("span",{style:{color:"rgb(138, 38, 80)"},children:"PO-Concerto-Mapping"})}),(0,i.jsx)("div",{className:"table-responsive  h-500px table-scroll borderd",children:(0,i.jsx)("table",{className:"table table-rounded table-row-bordered border-gray-600 gy-7 gs-7",children:1==j?(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(l.A,{spinning:j,size:"large",tip:"loading..."})}):(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-bottom fw-bold fs-6 text-gray-500  main-table",children:[(0,i.jsxs)("th",{onClick:()=>R(b),children:["PO-Number","Desc"!=f?(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,i.jsxs)("th",{onClick:()=>R(v),children:["Supplier Code","Desc"!=C?(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,i.jsx)("th",{children:"Raised By"}),(0,i.jsxs)("th",{onClick:()=>R(w),children:["Raised At"," ","Desc"!=S?(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,i.jsxs)("th",{onClick:()=>{R(k)},children:["Unique Id","Desc"!=T?(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,i.jsx)(n.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,i.jsx)("th",{children:"Concerto Reference"})]})}),(0,i.jsx)("tbody",{className:"border-solid",children:e.map(((s,r)=>{let l=s.group_id,j=e.length-1,g=j?e[r+1]:e[j],b=!1;return l!=(g?g.group_id:1)&&(b=!0),(0,i.jsxs)("tr",{className:"border border-grey",children:[(0,i.jsx)("td",{className:"border border-grey",children:s.po_num}),(0,i.jsx)("td",{className:"border border-grey",children:s.code}),(0,i.jsx)("td",{className:"border border-grey",children:s.created_by}),(0,i.jsx)("td",{className:"border border-grey",children:o()(s.created_at).format("DD-MMM-YYYY")}),!0===b?(0,i.jsxs)(a.Fragment,{children:[0==r?(0,i.jsxs)(a.Fragment,{children:[" ",(0,i.jsx)("td",{children:s.group_num})]}):(0,i.jsx)(a.Fragment,{children:(0,i.jsx)("td",{style:{borderTop:"none"},children:s.group_num})}),p==s.group_id?(0,i.jsx)("td",{children:(0,i.jsx)("form",{children:(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:"form-control form-control-solid input-sm",placeholder:""}),"\xa0",(0,i.jsx)("span",{style:{cursor:"pointer",marginTop:"5%"},children:(0,i.jsx)("div",{onClick:e=>(u(""),void c(!1)),className:"btn btn-icon btn-danger",children:(0,i.jsx)(n.aO,{path:"/media/icons/duotune/general/gen034.svg",className:"svg-icon-3"})})}),"\xa0",(0,i.jsx)("span",{style:{cursor:"pointer",marginTop:"5%"},children:(0,i.jsx)("div",{onClick:e=>(e=>{const s={concerto_reference:h};c(!1),u("");try{fetch("".concat(t.u.MAIN_ENDPOINT,"/api/add-concerto-reference/").concat(e.group_id),{method:"put",headers:{Authorization:"Bearer ".concat(m),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){e.status,e.json().then((function(e){e.success,d.Ay.success(e.message),P()}))})).catch((function(e){}))}catch(r){}})(s),className:"btn btn-icon btn-success",children:(0,i.jsx)(n.aO,{path:"/media/icons/duotune/general/gen037.svg",className:"svg-icon-3 text-white"})})})]})})}):0==r?(0,i.jsxs)(a.Fragment,{children:[" ",(0,i.jsxs)("td",{className:"d-flex ",children:[""==s.concerto_reference?(0,i.jsx)(a.Fragment,{children:(0,i.jsx)("input",{type:"text",className:"form-control sm",disabled:!0,placeholder:""})}):(0,i.jsx)(a.Fragment,{children:(0,i.jsx)("input",{type:"text",className:"form-control sm",disabled:!0,placeholder:"",value:s.concerto_reference})}),"\xa0 \xa0",(0,i.jsx)("span",{className:"btn btn-icon btn-warning",onClick:()=>{M(s)},children:(0,i.jsx)("i",{className:"fas fa-edit fs-6 me-1"})})]})]}):(0,i.jsxs)("td",{className:"d-flex ",style:{borderTop:"none"},children:[""==s.concerto_reference?(0,i.jsx)(a.Fragment,{children:(0,i.jsx)("input",{type:"text",className:"form-control sm",disabled:!0,placeholder:""})}):(0,i.jsx)(a.Fragment,{children:(0,i.jsx)("input",{type:"text",className:"form-control sm",disabled:!0,placeholder:"",value:s.concerto_reference})})," ","\xa0 \xa0",(0,i.jsx)("span",{className:"btn btn-icon btn-warning",onClick:()=>{M(s)},children:(0,i.jsx)("i",{className:"fas fa-edit fs-6 me-1"})})]})]}):(0,i.jsx)("td",{style:{borderBottom:"none",borderTop:"none"}})]})}))})]})})})]})})})})}}}]);
//# sourceMappingURL=218.79a2fa3f.chunk.js.map
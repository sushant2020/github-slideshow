"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[413],{36413:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(65043),a=r(424),s=r(99442),o=r(50525),i=r(30460),c=r(47419),l=r(11645),d=r(5397),u=r(89421),p=r(94539),h=r(86178),m=r.n(h),f=(r(60919),r(44864)),x=r(28671),b=r.n(x),y=r(70579);const{RangePicker:v}=o.A;let g="";const j=(0,s.y)((e=>{const[t,r]=(0,n.useState)(!1),[s,o]=(0,n.useState)(!1),[h,x]=(0,n.useState)([]),[j,w]=(0,n.useState)([]),[A,N]=(0,n.useState)([]),[C,O]=(0,n.useState)("Latest"),[S,_]=(0,n.useState)([]),[k,T]=(0,n.useState)([]),[P,E]=(0,n.useState)([]),[L,D]=(0,n.useState)([]),[M,W]=(0,n.useState)([]),[R,Y]=(0,n.useState)([]),[z,I]=(0,n.useState)(""),[F,H]=(0,n.useState)(""),[B,U]=(0,n.useState)(""),[q,G]=(0,n.useState)(""),[Q,J]=(0,n.useState)(""),[$,K]=(0,n.useState)(""),[V,X]=(0,n.useState)("PN"),[Z,ee]=(0,n.useState)("ASC"),[te,re]=(0,n.useState)("RA"),[ne,ae]=(0,n.useState)("ASC"),[se,oe]=(0,n.useState)("SC"),[ie,ce]=(0,n.useState)("ASC"),[le,de]=(0,n.useState)("STATUS"),[ue,pe]=(0,n.useState)("ASC");(0,n.useEffect)((()=>{he(),_([]),T([]),O("Latest")}),[]);const he=()=>{try{fetch("".concat(f.u.MAIN_ENDPOINT,"/api/recent-pos"),{method:"get",headers:{Authorization:"Bearer ".concat(g),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200!=e.status&&(r(!1),localStorage.clear(),window.location.reload()),e.json().then((function(e){x(e.data),w(e.data),r(!1)}))})).catch((function(e){r(!1)}))}catch(e){r(!1)}},me=e=>{let t="Historical"==C?A:h;if("PN"==e)if("Asc"==Z){ee("Desc");let e=t.sort(((e,t)=>{let r=e.po_num.toLowerCase(),n=t.po_num.toLowerCase();return r>n?-1:r<n?1:0}));"current"==C?x(e):N(e)}else{ee("Asc");let e=t.sort(((e,t)=>{let r=e.po_num.toLowerCase(),n=t.po_num.toLowerCase();return n>r?-1:n<r?1:0}));"current"==C?x(e):N(e)}if("RA"==e)if("Asc"==ne){ae("Desc");let e=t.sort(((e,t)=>e.created_at>t.created_at?1:t.created_at>e.created_at?-1:0));"current"==C?x(e):N(e)}else{ae("Asc");let e=t.sort(((e,t)=>t.created_at>e.created_at?1:e.created_at>t.created_at?-1:0));"current"==C?x(e):N(e)}if("SC"==e)if("Asc"==ie){ce("Desc");let e=t.sort(((e,t)=>e.code>t.code?1:t.code>e.code?-1:0));"current"==C?x(e):N(e)}else{ce("Asc");let e=t.sort(((e,t)=>t.code>e.code?1:e.code>t.code?-1:0));"current"==C?x(e):N(e)}if("STATUS"==e)if("Asc"==ue){pe("Desc");let e=t.sort(((e,t)=>e.status>t.status?1:t.status>e.status?-1:0));"current"==C?x(e):N(e)}else{pe("Asc");let e=t.sort(((e,t)=>t.status>e.status?1:e.status>t.status?-1:0));"current"==C?x(e):N(e)}};return g=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,y.jsx)(n.Fragment,{children:1==t?(0,y.jsx)(n.Fragment,{children:(0,y.jsx)(i.A,{loading:t,active:!0})}):(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(c.A,{children:(0,y.jsx)(l.A,{span:20,children:(0,y.jsxs)("ol",{className:"breadcrumb breadcrumb-dot fs-6 fw-bold",style:{margin:"1%"},children:[(0,y.jsx)(a.N_,{to:"/home",className:"pe-1 cursor-pointer",children:(0,y.jsx)("li",{className:"breadcrumb-item pe-1",children:"Home"})}),"/ \xa0",(0,y.jsx)("li",{className:"breadcrumb-item pe-3",children:"Po Items"})]})})}),(0,y.jsx)("div",{className:"row g-5 gx-xxl-8",style:{marginTop:"1%"},children:(0,y.jsx)("div",{className:"col-xxl-12",children:(0,y.jsx)("div",{className:"card-xxl-stretch mb-5 mb-xxl-8",children:(0,y.jsx)("div",{className:"row gy-5 g-xl-4",children:(0,y.jsxs)("div",{className:"card",children:[(0,y.jsxs)("div",{className:"card-header border-0 pt-2",children:[(0,y.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,y.jsx)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:"Recent Po's"})}),(0,y.jsx)("div",{className:"card-toolbar",style:{width:"30%"},children:(0,y.jsx)("input",{type:"search",onChange:e=>{let t=e.target.value,r=new Array;"Latest"==C&&(h.map((e=>{(e.po_num.toLowerCase().includes(t.toLowerCase())||e.created_by.toLowerCase().includes(t.toLowerCase())||null!==e.code&&e.code.toLowerCase().includes(t.toLowerCase()))&&r.push(e)})),x(r),""==t&&x(j))},className:"form-control form-control-solid",placeholder:"Search by PO Number / Raised By"})}),(0,y.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"filter by Date",children:"Latest"==C&&(0,y.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"",children:(0,y.jsx)(v,{onChange:e=>(e=>{E([]);let t=j;if(e){let r=m()(e[0]).format("YYYY-MM-DD"),n=m()(e[1]).format("YYYY-MM-DD");U(e);let a=new Array;"Latest"==C&&("Invalid date"!=r?(t.map((e=>{m()(e.created_at).format("YYYY-MM-DD")>=r&&m()(e.created_at).format("YYYY-MM-DD")<=n&&a.push(e)})),x(a)):x(j))}else x(j)})(e)})})}),(0,y.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Click to Create New PO"})]}),(0,y.jsx)("div",{className:"card-body py-3 ",children:(0,y.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,y.jsxs)("div",{className:"tab-pane fade show active",id:"latestPO",role:"tabpanel",children:[(0,y.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,y.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",(0,y.jsx)("sub",{className:"",style:{color:"black"},children:"(Last 3 week)"})]})}),(0,y.jsxs)(c.A,{children:[(0,y.jsx)(l.A,{span:12,children:(0,y.jsx)("div",{className:"table-responsive h-600px table-scroll",children:(0,y.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,y.jsxs)("th",{className:"min-w-80px",onClick:()=>me(V),children:["PO-Number"," ","Desc"!=Z?(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,y.jsxs)("th",{className:"min-w-50px",onClick:()=>me(se),children:["Supplier Code","Desc"!=ie?(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,y.jsx)("th",{className:"min-w-100px",children:"Raised By"}),(0,y.jsxs)("th",{className:"min-w-80px",onClick:()=>me(te),children:["Raised At"," ","Desc"!=ne?(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,y.jsxs)("th",{className:"min-w-80px",onClick:()=>me(le),children:["Status"," ","Desc"!=ue?(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,y.jsx)(p.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]})]})}),(0,y.jsx)("tbody",{children:void 0!=h&&h.map((e=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 cursor-pointer text-decoration-underline link",onClick:()=>(e=>{let t=e;K(t.supplier_id),o(!0);try{fetch("".concat(f.u.MAIN_ENDPOINT,"/api/get-poitems/").concat(e.po_id),{method:"get",headers:{Authorization:"Bearer ".concat(g),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){404!=e.status&&200==e.status?e.json().then((function(n){404==e.status&&(he(),r(!1)),"Latest"==C&&(J(n.data[0].supplier),E(n.data),D(n.data),I(t.po_num),G(t.po_id)),"Historical"==C&&(W(n.data),Y(n.data),H(t.po_num),G(n.po_id)),o(!1)})):o(!1)})).catch((function(e){r(!1)}))}catch(n){r(!1)}})(e),children:e.po_num})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 cursor-pointer  link",children:e.code})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_by?e.created_by:"-"})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_at?m()(e.created_at).format("DD-MMM-YYYY"):"-"})}),(0,y.jsx)("td",{children:(0,y.jsx)("div",{className:"d-flex flex-shrink-0",children:"0"==e.status?(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-warning fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"In Progress"}):"1"==e.status?(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Approval Pending"}):"2"==e.status?(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-primary fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Approved"}):"3"==e.status?(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-success fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Complete"}):"4"==e.status?(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Expired"}):"-"})})]})))})]})})}),(0,y.jsx)(l.A,{span:1}),(0,y.jsx)(l.A,{span:11,children:(0,y.jsx)("div",{children:s?(0,y.jsx)("div",{style:{margin:"25% 50% 50% 50%"},children:(0,y.jsx)(d.A,{tip:"Loading...",size:"large",style:{justifyContent:"center"}})}):(0,y.jsx)(n.Fragment,{children:(0,y.jsx)("div",{className:"table-responsive  h-600px table-scroll",children:(0,y.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[P.length>0&&(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,y.jsx)("th",{className:"w-20px",children:(0,y.jsx)(u.A,{type:"dashed",style:{color:"rgb(138, 38, 80)",cursor:"text"},children:z})}),(0,y.jsx)("th",{className:"min-w-100px"}),(0,y.jsx)("th",{className:"min-w-70px cursor-pointer"})]})}),(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,y.jsx)("th",{className:"min-w-100px",children:"Supplier"}),(0,y.jsx)("th",{className:"min-w-100px",children:"Product Code"}),(0,y.jsx)("th",{className:"min-w-100px",children:"Product Description"}),(0,y.jsx)("th",{className:"min-w-70px cursor-pointer",children:"Quantity"}),(0,y.jsx)("th",{className:"min-w-70px cursor-pointer",children:"Price"})]})}),(0,y.jsx)("tbody",{children:void 0!=P&&P.map((e=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:(0,y.jsx)(a.N_,{to:{pathname:"/supplier",state:{id:e.supplier_id}},children:(0,y.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 cursor-pointer text-decoration-underline link",children:e.supplier})})}),(0,y.jsx)("td",{children:(0,y.jsx)(a.N_,{to:{pathname:"/product",state:{prod_id:e.prod_id}},children:(0,y.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.product_code?e.product_code:"-"})})}),(0,y.jsx)("td",{children:(0,y.jsx)(b(),{lines:1,more:"Show more",less:"Show less",anchorClass:"",children:e.desc?e.desc:"-"})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.quantity})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:"."==e.price.charAt(0)?"0"+e.price:e.price})})]})))})]})})})})})]})]})})})]})})})})})]})})}))},11645:(e,t,r)=>{r.d(t,{A:()=>n});const n=r(30227).A},95150:(e,t,r)=>{r.d(t,{A:()=>n});const n=(0,r(65043).createContext)({})},30227:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(64467),a=r(58168),s=r(82284),o=r(98139),i=r.n(o),c=r(65043),l=r(35296),d=r(95150),u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};var p=["xs","sm","md","lg","xl","xxl"];const h=c.forwardRef((function(e,t){var r=c.useContext(l.QO),o=r.getPrefixCls,h=r.direction,m=c.useContext(d.A),f=m.gutter,x=m.wrap,b=m.supportFlexGap,y=e.prefixCls,v=e.span,g=e.order,j=e.offset,w=e.push,A=e.pull,N=e.className,C=e.children,O=e.flex,S=e.style,_=u(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),k=o("col",y),T={};p.forEach((function(t){var r={},o=e[t];"number"===typeof o?r.span=o:"object"===(0,s.A)(o)&&(r=o||{}),delete _[t],T=(0,a.A)((0,a.A)({},T),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},"".concat(k,"-").concat(t,"-").concat(r.span),void 0!==r.span),"".concat(k,"-").concat(t,"-order-").concat(r.order),r.order||0===r.order),"".concat(k,"-").concat(t,"-offset-").concat(r.offset),r.offset||0===r.offset),"".concat(k,"-").concat(t,"-push-").concat(r.push),r.push||0===r.push),"".concat(k,"-").concat(t,"-pull-").concat(r.pull),r.pull||0===r.pull),"".concat(k,"-rtl"),"rtl"===h))}));var P=i()(k,(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},"".concat(k,"-").concat(v),void 0!==v),"".concat(k,"-order-").concat(g),g),"".concat(k,"-offset-").concat(j),j),"".concat(k,"-push-").concat(w),w),"".concat(k,"-pull-").concat(A),A),N,T),E={};if(f&&f[0]>0){var L=f[0]/2;E.paddingLeft=L,E.paddingRight=L}if(f&&f[1]>0&&!b){var D=f[1]/2;E.paddingTop=D,E.paddingBottom=D}return O&&(E.flex=function(e){return"number"===typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(O),!1!==x||E.minWidth||(E.minWidth=0)),c.createElement("div",(0,a.A)({},_,{style:(0,a.A)((0,a.A)({},E),S),className:P,ref:t}),C)}))},28821:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(58168),a=r(64467),s=r(82284),o=r(5544),i=r(98139),c=r.n(i),l=r(65043),d=r(35296),u=r(46058),p=r(19304),h=r(29592),m=r(95150),f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};(0,h.P)("top","middle","bottom","stretch"),(0,h.P)("start","end","center","space-around","space-between","space-evenly");function x(e,t){var r=l.useState("string"===typeof e?e:""),n=(0,o.A)(r,2),a=n[0],i=n[1];return l.useEffect((function(){!function(){if("string"===typeof e&&i(e),"object"===(0,s.A)(e))for(var r=0;r<p.ye.length;r++){var n=p.ye[r];if(t[n]){var a=e[n];if(void 0!==a)return void i(a)}}}()}),[JSON.stringify(e),t]),a}const b=l.forwardRef((function(e,t){var r=e.prefixCls,i=e.justify,h=e.align,b=e.className,y=e.style,v=e.children,g=e.gutter,j=void 0===g?0:g,w=e.wrap,A=f(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),N=l.useContext(d.QO),C=N.getPrefixCls,O=N.direction,S=l.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),_=(0,o.A)(S,2),k=_[0],T=_[1],P=l.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),E=(0,o.A)(P,2),L=E[0],D=E[1],M=x(h,L),W=x(i,L),R=(0,u.A)(),Y=l.useRef(j);l.useEffect((function(){var e=p.Ay.subscribe((function(e){D(e);var t=Y.current||0;(!Array.isArray(t)&&"object"===(0,s.A)(t)||Array.isArray(t)&&("object"===(0,s.A)(t[0])||"object"===(0,s.A)(t[1])))&&T(e)}));return function(){return p.Ay.unsubscribe(e)}}),[]);var z=C("row",r),I=function(){var e=[void 0,void 0];return(Array.isArray(j)?j:[j,void 0]).forEach((function(t,r){if("object"===(0,s.A)(t))for(var n=0;n<p.ye.length;n++){var a=p.ye[n];if(k[a]&&void 0!==t[a]){e[r]=t[a];break}}else e[r]=t})),e}(),F=c()(z,(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},"".concat(z,"-no-wrap"),!1===w),"".concat(z,"-").concat(W),W),"".concat(z,"-").concat(M),M),"".concat(z,"-rtl"),"rtl"===O),b),H={},B=null!=I[0]&&I[0]>0?I[0]/-2:void 0,U=null!=I[1]&&I[1]>0?I[1]/-2:void 0;if(B&&(H.marginLeft=B,H.marginRight=B),R){var q=(0,o.A)(I,2);H.rowGap=q[1]}else U&&(H.marginTop=U,H.marginBottom=U);var G=(0,o.A)(I,2),Q=G[0],J=G[1],$=l.useMemo((function(){return{gutter:[Q,J],wrap:w,supportFlexGap:R}}),[Q,J,w,R]);return l.createElement(m.A.Provider,{value:$},l.createElement("div",(0,n.A)({},A,{className:F,style:(0,n.A)((0,n.A)({},H),y),ref:t}),v))}))},47419:(e,t,r)=>{r.d(t,{A:()=>n});const n=r(28821).A},28671:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(65043),s=c(a),o=c(r(65173)),i=c(r(94069));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var d=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={expanded:!1,truncated:!1},n.handleTruncate=function(e){e!==n.state.truncated&&n.setState({truncated:e})},n.toggleLines=function(e){e.preventDefault(),n.setState({expanded:!n.state.expanded})},l(n,r)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.more,n=e.less,a=e.lines,o=e.anchorClass,c=this.state,l=c.expanded,d=c.truncated;return s.default.createElement("div",null,s.default.createElement(i.default,{lines:!l&&a,ellipsis:s.default.createElement("span",null,"... ",s.default.createElement("a",{href:"#",className:o,onClick:this.toggleLines},r)),onTruncate:this.handleTruncate},t),!d&&l&&s.default.createElement("span",null," ",s.default.createElement("a",{href:"#",className:o,onClick:this.toggleLines},n)))}}]),t}(a.Component);d.defaultProps={lines:3,more:"Show more",less:"Show less",anchorClass:""},d.propTypes={children:o.default.node,lines:o.default.number,more:o.default.node,less:o.default.node,anchorClass:o.default.string},t.default=d,e.exports=t.default},94069:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(65043),a=r(65173),s=r.n(a),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return s.state={},s.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},s.elements={},s.onResize=s.onResize.bind(s),s.onTruncate=s.onTruncate.bind(s),s.calcTargetWidth=s.calcTargetWidth.bind(s),s.measureWidth=s.measureWidth.bind(s),s.getLines=s.getLines.bind(s),s.renderLine=s.renderLine.bind(s),s}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,r=this.onResize,n=document.createElement("canvas");this.canvasContext=n.getContext("2d"),t((function(){e&&e.parentNode.removeChild(e)})),window.addEventListener("resize",r)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate(),this.props.width!==e.width&&this.calcTargetWidth()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,r=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(r)}},{key:"innerText",value:function(e){var t=document.createElement("div"),r="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var n=t[r],a=document.createElement("div");return a.innerHTML="foo<br/>bar","foo\nbar"!==a[r].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),n=t[r]),n}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"===typeof t&&(this.timeout=window.requestAnimationFrame((function(){t(e)})))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,r=this.calcTargetWidth,n=this.canvasContext,a=this.props.width;if(t){var s=a||Math.floor(t.parentNode.getBoundingClientRect().width);if(!s)return window.requestAnimationFrame((function(){return r(e)}));var o=window.getComputedStyle(t),i=[o["font-weight"],o["font-style"],o["font-size"],o["font-family"]].join(" ");n.font=i,this.setState({targetWidth:s},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,r=t.lines,a=t.ellipsis,s=t.trimWhitespace,o=this.state.targetWidth,i=this.innerText,c=this.measureWidth,l=this.onTruncate,d=this.trimRight,u=[],p=i(e.text).split("\n").map((function(e){return e.split(" ")})),h=!0,m=this.ellipsisWidth(this.elements.ellipsis),f=1;f<=r;f++){var x=p[0];if(0!==x.length){var b=x.join(" ");if(c(b)<=o&&1===p.length){h=!1,u.push(b);break}if(f===r){for(var y=x.join(" "),v=0,g=y.length-1;v<=g;){var j=Math.floor((v+g)/2);c(y.slice(0,j+1))+m<=o?v=j+1:g=j-1}var w=y.slice(0,v);if(s)for(w=d(w);!w.length&&u.length;){w=d(u.pop())}b=n.createElement("span",null,w,a)}else{for(var A=0,N=x.length-1;A<=N;){var C=Math.floor((A+N)/2);c(x.slice(0,C+1).join(" "))<=o?A=C+1:N=C-1}if(0===A){f=r-1;continue}b=x.slice(0,A).join(" "),p[0].splice(0,A)}u.push(b)}else u.push(),p.shift(),f--}return l(h),u}},{key:"renderLine",value:function(e,t,r){if(t===r.length-1)return n.createElement("span",{key:t},e);var a=n.createElement("br",{key:t+"br"});return e?[n.createElement("span",{key:t},e),a]:a}},{key:"render",value:function(){var e=this,t=this.elements.target,r=this.props,a=r.children,s=r.ellipsis,i=r.lines,c=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(r,["children","ellipsis","lines"]),l=this.state.targetWidth,d=this.getLines,u=this.renderLine,p=this.onTruncate,h=void 0;return"undefined"!==typeof window&&!(!t||!l)&&(i>0?h=d().map(u):(h=a,p(!1))),delete c.onTruncate,delete c.trimWhitespace,n.createElement("span",o({},c,{ref:function(t){e.elements.target=t}}),n.createElement("span",null,h),n.createElement("span",{ref:function(t){e.elements.text=t}},a),n.createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},s))}}]),t}(n.Component);c.propTypes={children:s().node,ellipsis:s().node,lines:s().oneOfType([s().oneOf([!1]),s().number]),trimWhitespace:s().bool,width:s().number,onTruncate:s().func},c.defaultProps={children:"",ellipsis:"\u2026",lines:1,trimWhitespace:!1,width:0};const l=c},60919:()=>{}}]);
//# sourceMappingURL=413.1901b9e0.chunk.js.map
"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[523],{62523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(65043),o=a(15627),r=a(67289),c=a(10804),i=a(44864),l=a(57284),s=a(50525),d=a(35696),u=a(89421),m=a(92584),p=a(82217),h=a(50289),f=a(60521),v=a(25037),x=a(86178),y=a.n(x),g=a(424),C=a(70579);let j=new Date,b=y()(j).format("DD-MMM-YYYY");const{RangePicker:A}=s.A,N=()=>{const[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!1),[x,j]=(0,n.useState)(1),[N,E]=(0,n.useState)(0),[k,S]=(0,n.useState)(1),[O,w]=(0,n.useState)(!1),[D,P]=(0,n.useState)(!1),[T,I]=(0,n.useState)({columnKey:"as_of_date",order:"descend"}),[F,R]=(0,n.useState)({columnKey:"ProductAC4",order:"descend"});(0,n.useEffect)((()=>{w(!0),L()}),[k,x,T,F]);let Y="";const L=async()=>{w(!0),await fetch("".concat(i.u.MAIN_ENDPOINT,"/api/","get-watchlist/").concat(k,"/").concat(x,"/").concat(T.columnKey,"/").concat("ascend"==T.order?1:0),{method:"get",headers:{Authorization:"Bearer ".concat(Y),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(a){var n,o,r;(200!=e.status&&(t([]),E(1)),1==a.success&&(null===a||void 0===a||null===(n=a.data)||void 0===n||null===(o=n.products)||void 0===o?void 0:o.length)>0)&&(t(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.products),E(a.data.rowCnt),w(!1))}))})).catch((function(e){console.log("Fetch Error :-S",e)})),w(!1)},_=[{title:"Agg Code",dataIndex:"ProductAC4",key:"ProductAC4",sorter:!0,width:100},{title:"Spot Code",dataIndex:"SPOTCode",key:"SPOTCode",sorter:!0,width:100,render:(e,t)=>(0,C.jsx)(d.A,{placement:"topLeft",title:"View Historical Pricing",children:(0,C.jsx)(g.N_,{to:{pathname:"/product-details",state:{prod_id:t.ProductAC4,spotid:t.SPOTCode,spotCode:e}},children:e})})},{title:"Description",dataIndex:"ProductDesc",key:"ProductDesc",sorter:!0,width:200},{title:"Pack Size",dataIndex:"PackSize",key:"PackSize",width:100,render:e=>e?l.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Buyer Comment",dataIndex:"buyer_comments",key:"buyer_comments",width:200,render:e=>e?l.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Supplier Comment",dataIndex:"supplier_comments",key:"supplier_comments",width:200,render:e=>e?l.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Date",dataIndex:"AsOfDate",key:"AsOfDate",width:100,hidden:2==k||6==k,render:e=>e?y()(e).format("DD-MMM-YYYY"):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Day",dataIndex:"Day",key:"Day",width:100,hidden:6!=k,render:e=>e?l.A.capitalizeFirstLetter(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Action",dataIndex:"ProductAC4",key:"ProductAC4",fixed:"right",width:100,hidden:7==k,render:(e,t)=>(0,C.jsx)(d.A,{placement:"topLeft",title:"Remove from watchlist",children:(0,C.jsx)(u.A,{icon:(0,C.jsx)(v.A,{}),onClick:()=>z(t)})})}].filter((e=>!e.hidden)),z=e=>{fetch("".concat(i.u.MAIN_ENDPOINT,"/api/remove-from-watchlist/").concat(e.watchlist_id),{method:"put",headers:{Authorization:"Bearer ".concat(Y),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.status,e.json().then((function(e){1==e.success&&(o.Ay.success(e.data),L())}))})).catch((function(e){console.log("Fetch Error :-S",e)}))};return Y=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"pt-4 m-2",children:(0,C.jsx)("div",{className:"card",children:(0,C.jsxs)("div",{className:"card-body py-3 ",children:[(0,C.jsxs)("div",{className:"row m-4 p-2",children:[(0,C.jsx)("div",{className:"col-3",children:(0,C.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,C.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,C.jsxs)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:["Watchlist ",(0,C.jsxs)(C.Fragment,{children:["(",b,")"]})]})})})}),(0,C.jsx)("div",{className:"col-3"}),(0,C.jsx)("div",{className:"col-3",children:(0,C.jsxs)("div",{className:"text-center",children:[" ",(0,C.jsxs)(d.A,{placement:"topLeft",title:"Notify Reviewer",children:[(0,C.jsx)(m.A,{title:"Do you want to mark watch list as processed?",onConfirm:async()=>{P(!0);let t={list_type:k,type:2,dataCount:e.lenght};await fetch("".concat(i.u.MAIN_ENDPOINT,"/api/notify-user"),{method:"post",headers:{Authorization:"Bearer ".concat(Y),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e.json().then((function(e){1==e.success&&(o.Ay.success(e.message),L())}))})).catch((function(e){})),P(!1)},okText:"Yes",cancelText:"No",children:(0,C.jsx)(u.A,{type:"primary",size:"large",loading:D,children:"Notify Reviewer"})})," "]})]})}),(0,C.jsx)("div",{className:"col-3",children:(0,C.jsxs)("div",{id:"outer",children:[(0,C.jsxs)("div",{className:"inner p-1",children:[" ",(0,C.jsx)(d.A,{placement:"topLeft",title:"Search",children:(0,C.jsx)(u.A,{type:"primary",size:"large",onClick:()=>{s(!0)},children:"Search"})})," "]}),(0,C.jsxs)("div",{className:"inner p-1",children:[(0,C.jsx)(d.A,{placement:"topLeft",title:"Search",children:(0,C.jsx)(u.A,{type:"primary",size:"large",onClick:()=>{L()},children:"Reset"})})," "]})]})})]}),(0,C.jsxs)("ul",{className:"nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-8 main-table",children:[(0,C.jsx)("li",{className:"nav-item",children:(0,C.jsx)("a",{className:"nav-link text-active-primary pb-4 active","data-bs-toggle":"tab",href:"#Buyer",onClick:()=>{S(1),j(1)},children:"BUYER INTEL"})}),(0,C.jsx)("li",{className:"nav-item",children:(0,C.jsx)("a",{className:"nav-link text-active-primary pb-4 ","data-bs-toggle":"tab",href:"#Preset",onClick:()=>{S(2),j(1)},children:"PRESET FOR OFFICE-DAILY"})}),(0,C.jsx)("li",{className:"nav-item",children:(0,C.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#RDS",onClick:()=>{S(3),j(1)},children:"RDS"})}),(0,C.jsx)("li",{className:"nav-item",children:(0,C.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#OFFICEWATCHLIST",onClick:()=>{S(4),j(1)},children:"BUYER WATCHLIST"})}),(0,C.jsx)("li",{className:"nav-item",children:(0,C.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#BUYERINTEL",onClick:()=>{S(5),j(1)},children:"OFFERS"})}),(0,C.jsx)("li",{className:"nav-item",children:(0,C.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#BUYERINTEL",onClick:()=>{S(6),j(1)},children:"PRESET FOR OFFICE - TWICE A WEEK"})}),(0,C.jsx)("li",{className:"nav-item",children:(0,C.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#UNDERCOSTLINE",onClick:()=>{S(7),j(1)},children:"UNDERCOST LINES"})})]}),(0,C.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,C.jsxs)("div",{className:"tab-pane fade show active ",id:k,role:"tabpanel",children:[(0,C.jsx)(r.A,{columns:_,dataSource:e,loading:O,pagination:!1,onChange:(e,t,a,n)=>{I({...a})}}),(0,C.jsx)("div",{className:"row text-end m-4",children:(0,C.jsx)(c.A,{defaultCurrent:x,defaultPageSize:10,current:x,total:N,onChange:e=>{j(e)},hideOnSinglePage:!0,showSizeChanger:!1})})]})}),(0,C.jsx)(p.A,{open:a,onCancel:()=>{s(!1)},footer:!1,destroyOnClose:!0,children:(0,C.jsxs)(h.A,{name:"time_related_controls",onFinish:e=>{w(!0);let a="",n="";if(e.productcode||e.daterange){e.daterange&&(a=y()(e.daterange[0]).format("YYYY-MM-DD"),n=y()(e.daterange[1]).format("YYYY-MM-DD"));var o={prodcode:e.productcode?e.productcode:"",sdate:a||"",edate:n||""};fetch("".concat(i.u.MAIN_ENDPOINT,"/api/search-watchlist/").concat(k,"/1/AsofDate/0"),{method:"post",headers:{Authorization:"Bearer ".concat(Y),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){200!=e.status&&t([]),e.json().then((function(e){1==e.success&&(t(e.data.products),w(!1))}))})).catch((function(e){console.log("Fetch Error :-S",e)})),s(!1)}},style:{maxWidth:600},children:[(0,C.jsx)(h.A.Item,{name:"daterange",label:"From Date - To Date",children:(0,C.jsx)(A,{})}),(0,C.jsx)(h.A.Item,{name:"productcode",label:"Product Code",children:(0,C.jsx)(f.A,{placeholder:"Search Product"})}),(0,C.jsx)(h.A.Item,{children:(0,C.jsx)(u.A,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})})})})}},57284:(e,t,a)=>{a.d(t,{A:()=>o});class n{static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}}n.addZero=e=>{if(null==e)return e;{const t=e;if(!t||""==t||null==t)return;return"."==(null===t||void 0===t?void 0:t.charAt(0))?"0"+t:e}};const o=n},25037:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(89379),o=a(65043);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};var c=a(22172),i=function(e,t){return o.createElement(c.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:r}))};const l=o.forwardRef(i)},92584:(e,t,a)=>{a.d(t,{A:()=>S});var n=a(58168),o=a(5544),r=a(51376),c=a(98139),i=a.n(c),l=a(28678),s=a(25001),d=a(65043),u=a(35296),m=function(e){return e?"function"===typeof e?e():e:null},p=a(83290),h=a(35696),f=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},v=function(e){var t=e.title,a=e.content,n=e.prefixCls;return d.createElement(d.Fragment,null,t&&d.createElement("div",{className:"".concat(n,"-title")},m(t)),d.createElement("div",{className:"".concat(n,"-inner-content")},m(a)))};const x=d.forwardRef((function(e,t){var a=e.prefixCls,o=e.title,r=e.content,c=e._overlay,i=e.placement,l=void 0===i?"top":i,s=e.trigger,m=void 0===s?"hover":s,x=e.mouseEnterDelay,y=void 0===x?.1:x,g=e.mouseLeaveDelay,C=void 0===g?.1:g,j=e.overlayStyle,b=void 0===j?{}:j,A=f(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),N=d.useContext(u.QO).getPrefixCls,E=N("popover",a),k=N(),S=d.useMemo((function(){return c||(o||r?d.createElement(v,{prefixCls:E,title:o,content:r}):null)}),[c,o,r,E]);return d.createElement(h.A,(0,n.A)({placement:l,trigger:m,mouseEnterDelay:y,mouseLeaveDelay:C,overlayStyle:b},A,{prefixCls:E,ref:t,overlay:S,transitionName:(0,p.by)(k,"zoom-big",A.transitionName)}))}));var y=a(12701),g=a(89421),C=a(83085),j=a(38046),b=a(38097),A=a(8376),N=function(e){var t=e.prefixCls,a=e.okButtonProps,o=e.cancelButtonProps,r=e.title,c=e.cancelText,i=e.okText,l=e.okType,s=e.icon,p=e.showCancel,h=void 0===p||p,f=e.close,v=e.onConfirm,x=e.onCancel,y=d.useContext(u.QO).getPrefixCls;return d.createElement(b.A,{componentName:"Popconfirm",defaultLocale:A.A.Popconfirm},(function(e){return d.createElement("div",{className:"".concat(t,"-inner-content")},d.createElement("div",{className:"".concat(t,"-message")},s&&d.createElement("span",{className:"".concat(t,"-message-icon")},s),d.createElement("div",{className:"".concat(t,"-message-title")},m(r))),d.createElement("div",{className:"".concat(t,"-buttons")},h&&d.createElement(g.A,(0,n.A)({onClick:x,size:"small"},o),null!==c&&void 0!==c?c:e.cancelText),d.createElement(j.A,{buttonProps:(0,n.A)((0,n.A)({size:"small"},(0,C.D)(l)),a),actionFn:v,close:f,prefixCls:y("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==i&&void 0!==i?i:e.okText)))}))},E=void 0,k=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const S=d.forwardRef((function(e,t){var a=e.prefixCls,c=e.placement,m=void 0===c?"top":c,p=e.trigger,h=void 0===p?"click":p,f=e.okType,v=void 0===f?"primary":f,g=e.icon,C=void 0===g?d.createElement(r.A,null):g,j=e.children,b=e.overlayClassName,A=e.onOpenChange,S=e.onVisibleChange,O=k(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),w=d.useContext(u.QO).getPrefixCls,D=(0,l.A)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),P=(0,o.A)(D,2),T=P[0],I=P[1],F=function(e,t){I(e,!0),null===S||void 0===S||S(e,t),null===A||void 0===A||A(e,t)},R=w("popover",a),Y=w("popconfirm",a),L=i()(Y,b);return d.createElement(x,(0,n.A)({},O,{trigger:h,prefixCls:R,placement:m,onOpenChange:function(t){var a=e.disabled;void 0!==a&&a||F(t)},open:T,ref:t,overlayClassName:L,_overlay:d.createElement(N,(0,n.A)({okType:v,icon:C},e,{prefixCls:R,close:function(e){F(!1,e)},onConfirm:function(t){var a;return null===(a=e.onConfirm)||void 0===a?void 0:a.call(E,t)},onCancel:function(t){var a;F(!1,t),null===(a=e.onCancel)||void 0===a||a.call(E,t)}}))}),(0,y.Ob)(j,{onKeyDown:function(e){var t,a;d.isValidElement(j)&&(null===(a=null===j||void 0===j?void 0:(t=j.props).onKeyDown)||void 0===a||a.call(t,e)),function(e){e.keyCode===s.A.ESC&&T&&F(!1,e)}(e)}}))}))}}]);
//# sourceMappingURL=523.cf3f6a01.chunk.js.map
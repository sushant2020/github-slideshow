"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[852],{91852:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=s(65043),n=s(424),o=s(99442),c=s(94539),l=s(94406),r=s(50289),d=s(60521),i=s(50525),m=s(15627),u=s(47419),h=s(11645),p=s(25676),g=s(67289),x=s(10804),f=s(86178),b=s.n(f),j=s(44864),y=s(70579);const _=l.A.Option,N=a.createContext(null);let A="",S="";const k=e=>{let{index:t,...s}=e;const[a]=r.A.useForm();return(0,y.jsx)(r.A,{form:a,component:!1,children:(0,y.jsx)(N.Provider,{value:a,children:(0,y.jsx)("tr",{...s})})})},v=e=>{let{title:t,editable:s,children:n,dataIndex:o,record:c,handleSave:l,...i}=e;const[m,u]=(0,a.useState)(!1),h=(0,a.useRef)(null),p=(0,a.useContext)(N);(0,a.useEffect)((()=>{var e;m&&(null===(e=h.current)||void 0===e||e.focus())}),[m]);const g=()=>{u(!m),p.setFieldsValue({[o]:c[o]})},x=async()=>{try{const e=await p.validateFields();g(),l({...c,...e})}catch(e){console.log("Save failed:",e)}};let f=n;return s&&(f=m?(0,y.jsx)(r.A.Item,{style:{margin:0},name:o,rules:[{required:!0,message:"".concat(t," is required.")}],children:(0,y.jsx)(d.A,{ref:h,onPressEnter:x,onBlur:x})}):(0,y.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:g,children:n})),(0,y.jsx)("td",{...i,children:f})},{RangePicker:C}=i.A;const w=(0,o.y)((function(e){const[t,s]=(0,a.useState)(!1),[o,r]=(0,a.useState)(1),[i,f]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),[I,T]=(0,a.useState)([]),[O,P]=(0,a.useState)([]),[D,M]=(0,a.useState)([]),[Y,F]=(0,a.useState)("Assigned_to_me"),[E,R]=(0,a.useState)("Asc"),[z,B]=(0,a.useState)("Asc"),[J,K]=(0,a.useState)("Asc"),[q,L]=(0,a.useState)("Asc"),[U,V]=(0,a.useState)("Asc"),[H,Q]=(0,a.useState)("AT"),[G,W]=(0,a.useState)("BY"),[X,Z]=(0,a.useState)("CO"),[$,ee]=(0,a.useState)("Status"),[te,se]=(0,a.useState)("Complete"),[ae,ne]=(0,a.useState)(1),[oe,ce]=(0,a.useState)(1),[le,re]=(0,a.useState)(1),[de,ie]=(0,a.useState)(1),[me,ue]=(0,a.useState)(1),[he,pe]=(0,a.useState)(1),[ge,xe]=(0,a.useState)(0),[fe,be]=(0,a.useState)(0),[je,ye]=(0,a.useState)([]),[_e,Ne]=(0,a.useState)([]),[Ae,Se]=(0,a.useState)(null),[ke,ve]=(0,a.useState)(null),[Ce,we]=(0,a.useState)({keyword:"",user:""}),[Ie,Te]=(0,a.useState)(null),[Oe,Pe]=(0,a.useState)(null),[De,Me]=(0,a.useState)(!0),[Ye,Fe]=(0,a.useState)(1),[Ee,Re]=(0,a.useState)(1),[ze,Be]=(0,a.useState)({columnKey:"ac4",order:"ascend"}),[Je,Ke]=(0,a.useState)({columnKey:"ac4",order:"ascend"});(0,a.useEffect)((()=>{s(!0),Ve(Ye,ge),He(Ee,fe)}),[Y,Ye,le]);const qe=[{title:"Agg Code",dataIndex:"ac4",key:"ac4",sorter:(e,t)=>e.ac4.localeCompare(t.ac4),render:(e,t)=>(0,y.jsx)(n.N_,{to:{pathname:"/product",state:{prod_id:t.productpage_id,data:t}},children:e})},{title:"Task",dataIndex:"task",key:"task",editable:!0,sorter:(e,t)=>e.task.localeCompare(t.task),render:(e,t)=>(0,y.jsx)(d.A,{value:e})},{title:"Assigned To",dataIndex:"assigned_to",key:"assigned_to",sorter:(e,t)=>e.assigned_to.localeCompare(t.assigned_to)},{title:"Created On",dataIndex:"created_on",key:"created_on",sorter:(e,t)=>e.created_on.localeCompare(t.created_on),render:e=>e?b()(e).format("DD-MMM-YYYY"):(0,y.jsx)(y.Fragment,{children:"-"})},{title:"Status",dataIndex:"status",key:"status",sorter:(e,t)=>e.status.localeCompare(t.status),render:(e,t)=>e?"Pending"==e?(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-warning fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:e}):(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-success fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:e}):(0,y.jsx)(y.Fragment,{children:"-"})}].map((e=>e.editable?{...e,onCell:t=>({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:Le})}:e)),Le=e=>{let t={content:e.task};try{fetch("".concat(j.u.MAIN_ENDPOINT,"/api/update-task-comment/").concat(e.task_id),{method:"put",headers:{Authorization:"Bearer ".concat(S),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200==e.status&&e.json().then((function(e){m.Ay.success(e.message),He(Ee,fe)}))})).catch((function(e){}))}catch(s){console.log("ERR>>>",s)}},Ue=[{title:"Agg Code",dataIndex:"ac4",key:"ac4",sorter:(e,t)=>e.ac4.localeCompare(t.ac4),render:(e,t)=>(0,y.jsx)(n.N_,{to:{pathname:"/product",state:{prod_id:t.productpage_id,data:t}},children:e})},{title:"Task",dataIndex:"task",key:"task",sorter:(e,t)=>e.task.localeCompare(t.task)},{title:"Assigned By",dataIndex:"assigned_by",key:"assigned_by",sorter:(e,t)=>e.assigned_by.localeCompare(t.assigned_by),editable:!0},{title:"Assigned To",dataIndex:"assigned_to",key:"assigned_to",sorter:(e,t)=>e.assigned_to.localeCompare(t.assigned_to)},{title:"Created On",dataIndex:"created_on",key:"created_on",sorter:(e,t)=>e.created_on.localeCompare(t.created_on),render:e=>e?b()(e).format("DD-MMM-YYYY"):(0,y.jsx)(y.Fragment,{children:"-"})},{title:"Status",dataIndex:"status",key:"status",sorter:(e,t)=>e.status.localeCompare(t.status),render:(e,t)=>e?"Pending"==e?(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-warning fw-bold btn-sm me-1 min-w-100px",title:"Mark Task as Completed",onClick:()=>Qe(t),children:e})]}):(0,y.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-success fw-bold btn-sm me-1 min-w-100px",title:"Revert To Pending",onClick:()=>Ge(t),children:e}):(0,y.jsx)(y.Fragment,{children:"-"})}],Ve=(e,t)=>{try{fetch("".concat(j.u.MAIN_ENDPOINT,"/api/get-tasks-to-me/").concat(e,"/").concat(t),{method:"get",headers:{Authorization:"Bearer ".concat(S),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200!=e.status&&(localStorage.clear(),window.location.reload()),e.json().then((function(e){P(e.data.assigned_to_me),w(e.data.assigned_to_me),ye(e.data.users),ne(e.data.assigned_to_me_count),s(!1)}))})).catch((function(e){s(!1)}))}catch(a){}},He=(e,t)=>{try{fetch("".concat(j.u.MAIN_ENDPOINT,"/api/get-tasks-by-me/").concat(e,"/").concat(t),{method:"get",headers:{Authorization:"Bearer ".concat(S),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){M(e.data.assigned_by_me),T(e.data.assigned_by_me),Ne(e.data.users),ce(e.data.assigned_by_me_count),s(!1)}))})).catch((function(e){s(!1)}))}catch(a){}},Qe=e=>{const t={product_id:"".concat(e.product_id),user_id:"".concat(e.user_id),status:"1"};try{fetch("".concat(j.u.MAIN_ENDPOINT,"/api/update-task/").concat(e.task_id),{method:"put",headers:{Authorization:"Bearer ".concat(S),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200==e.status&&e.json().then((function(e){1==e.success&&(m.Ay.success(e.message),ue(le),re(le),Fe(le),Re(le),Ve(le,ge),He(Ee,fe))}))})).catch((function(e){}))}catch(s){console.log("ERR>>>",s)}},Ge=e=>{const t={product_id:"".concat(e.product_id),user_id:"".concat(e.user_id),status:"0"};try{fetch("".concat(j.u.MAIN_ENDPOINT,"/api/update-task/").concat(e.task_id),{method:"put",headers:{Authorization:"Bearer ".concat(S),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200==e.status&&e.json().then((function(e){1==e.success&&(m.Ay.success(e.message),ue(le),re(le),Ve(le,ge),He(Ee,fe))}))})).catch((function(e){console.log("Fetch Error :-S",e)}))}catch(s){console.log("ERR>>>",s)}},We={body:{row:k,cell:v}};S=JSON.parse(localStorage.getItem("portalUserDataToken")||""),A=JSON.parse(localStorage.getItem("portalUserDataRole")||"");const Xe="Administrator"==A?["All Tasks","Assigned by me"]:["Assigned to me","Assigned by me"];return(0,y.jsx)(a.Fragment,{children:(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)("ol",{className:"breadcrumb breadcrumb-dot fs-6 fw-bold",style:{margin:"1%"},children:[(0,y.jsx)(n.N_,{to:"/home",className:"pe-1 cursor-pointer",children:(0,y.jsx)("li",{className:"breadcrumb-item pe-1",children:"Home"})}),"/ \xa0",(0,y.jsx)("li",{className:"breadcrumb-item pe-3",children:"Tasks List"})]}),(0,y.jsx)("div",{className:"row g-5 gx-xxl-8",style:{marginTop:"1%"},children:(0,y.jsx)("div",{className:"col-xxl-12",children:(0,y.jsx)("div",{className:"card-xxl-stretch mb-5 mb-xxl-8",children:(0,y.jsx)("div",{className:"row gy-5 g-xl-4",children:(0,y.jsxs)("div",{className:"card",children:[(0,y.jsx)("div",{className:"card-header border-0 pt-2",children:(0,y.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,y.jsx)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:"Tasks List"})})}),(0,y.jsx)("div",{className:"card-header border-0 pt-2 d-none d-sm-none d-md-block",children:(0,y.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,y.jsx)("form",{onSubmit:e=>{Se(null),ve(null),e.preventDefault();let t={from_date:Ae,to_date:ke,task:Ce.keyword,assigned_to:Ie,assigned_by:Oe};try{"Assigned_to_me"==Y?fetch("".concat(j.u.MAIN_ENDPOINT,"/api/search-tasks-to-me"),{method:"post",headers:{Authorization:"Bearer ".concat(S),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200==e.status&&e.json().then((function(e){s(!1),P(e.data.tasks_assigned_to_me),Me(!1),s(!1)}))})).catch((function(e){s(!1)})):fetch("".concat(j.u.MAIN_ENDPOINT,"/api/search-tasks-by-me"),{method:"post",headers:{Authorization:"Bearer ".concat(S),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200==e.status&&e.json().then((function(e){s(!1),M(e.data.tasks_assigned_by_me),Me(!1),s(!1)}))})).catch((function(e){s(!1)}))}catch(a){console.log("ERR>>>",a)}},children:(0,y.jsxs)(u.A,{justify:"space-around",gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,y.jsx)(h.A,{xs:{span:12},lg:{span:5,offset:0},md:{span:4,offset:1},className:"mb-4",children:(0,y.jsx)(C,{defaultValue:[Ae,ke],onChange:e=>{(e=>{if(e){let t=b()(e[0]).format("YYYY-MM-DD"),s=b()(e[1]).format("YYYY-MM-DD");Se(t),ve(s)}else"Assigned_to_me"==Y?(Ve(me,ge),re(1),Me(!0)):(He(me,ge),ie(1),Me(!0))})(e)}})}),(0,y.jsx)(h.A,{xs:{span:12},lg:{span:4,offset:1},md:{span:4,offset:1},className:"mb-4",children:(0,y.jsx)("input",{type:"text",className:"form-control form-control-solid",placeholder:"Filter by Keyword ",name:"keyword",value:Ce.keyword,onChange:e=>{we({...Ce,[e.target.name]:e.target.value})}})}),"Administrator"==A?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{xs:{span:24},lg:{span:3,offset:1},md:{span:3,offset:1},className:"mb-4",children:(0,y.jsx)(l.A,{placeholder:"Assigned to ",value:Ie,onChange:e=>{Te(e)},children:je.map(((e,t)=>(0,y.jsx)(_,{value:e.id,children:e.username})))})}),(0,y.jsx)(h.A,{xs:{span:24},lg:{span:3,offset:1},md:{span:3,offset:1},className:"mb-4",children:(0,y.jsx)(l.A,{placeholder:"Assigned by ",value:Oe,onChange:e=>{Pe(e)},children:_e.map(((e,t)=>(0,y.jsx)(_,{value:e.id,children:e.username})))})})]}):"Administrator"!=A&&"Assigned_to_me"==Y?(0,y.jsx)(h.A,{xs:{span:24},lg:{span:3,offset:1},md:{span:3,offset:1},className:"mb-4",children:(0,y.jsx)(l.A,{placeholder:"Assigned by ",value:Oe,onChange:e=>{Pe(e)},children:_e.map(((e,t)=>(0,y.jsx)(_,{value:e.id,children:e.username})))})}):(0,y.jsx)(h.A,{xs:{span:24},lg:{span:3,offset:1},md:{span:3,offset:1},className:"mb-4",children:(0,y.jsx)(l.A,{placeholder:"Assigned to ",value:Ie,onChange:e=>{Te(e)},children:je.map(((e,t)=>(0,y.jsx)(_,{value:e.id,children:e.username})))})}),(0,y.jsx)(h.A,{xs:{span:12},lg:{span:1,offset:2},md:{span:1,offset:1},sm:{span:1,offset:1},className:"mb-4",children:(0,y.jsx)("button",{className:"btn btn-sm btn-primary ",type:"submit",children:"Submit"})}),(0,y.jsx)(h.A,{xs:{span:12},lg:{span:1,offset:2},md:{span:1,offset:1},sm:{span:1,offset:1},className:"mb-4",children:(0,y.jsx)("button",{className:"btn btn-sm btn-primary",type:"reset",onClick:()=>{we({keyword:"",user:""}),Se(null),ve(null),Me(!0),"Assigned_to_me"==Y?(Te(null),Pe(null),Ve(me,ge),re(1)):(Te(null),Pe(null),He(he,fe),ie(1))},children:"Reset"})}),(0,y.jsx)(h.A,{xs:{span:1,offset:1},lg:{span:1,offset:1},md:{span:1,offset:1},sm:{span:1,offset:1}})]})})})}),(0,y.jsx)("div",{className:"card-body py-3",children:(0,y.jsx)(p.A,{defaultActiveKey:"1",onChange:e=>{F(e)},items:Xe.map(((e,s)=>{String(s+1);return{label:e,key:e,children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"mb-4",children:0==s?"(Task assign to all user`s with all status)":"(Task assign by me with all status)"})," ",(0,y.jsx)(g.A,{columns:0==s?Ue:qe,dataSource:0==s?O:D,pagination:!1,scroll:{x:"auto",y:"400px"},loading:t,components:We})," ","Assigned_to_me"==Y?(0,y.jsxs)(y.Fragment,{children:["  ",(0,y.jsx)(x.A,{total:ae,style:{margin:"2%"},defaultCurrent:Ye,defaultPageSize:10,current:Ye,onChange:e=>{Fe(e)},hideOnSinglePage:!0,showSizeChanger:!1})]}):(0,y.jsxs)(y.Fragment,{children:["  ",(0,y.jsx)(x.A,{total:ae,style:{margin:"2%"},defaultCurrent:Ee,defaultPageSize:10,current:Ee,onChange:e=>{Re(e)},hideOnSinglePage:!0,showSizeChanger:!1})]})]})}}))})})]})})})})}),(0,y.jsx)("div",{className:"modal fade",id:"po","aria-hidden":"true",children:(0,y.jsx)("div",{className:"modal-dialog mw-650px",children:(0,y.jsxs)("div",{className:"modal-content",children:[(0,y.jsx)("div",{className:"modal-header pb-0 border-0 justify-content-end",children:(0,y.jsx)("div",{className:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal",children:(0,y.jsx)(c.aO,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})}),(0,y.jsxs)("div",{className:"modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15",children:[(0,y.jsx)("div",{className:"text-center mb-13",children:(0,y.jsx)("h1",{className:"mb-3",children:"Purchase Order"})}),(0,y.jsxs)("form",{className:"form",children:[(0,y.jsxs)("div",{className:"fv-row mb-10",children:[(0,y.jsx)("label",{className:"form-label fs-6 fw-bolder text-dark text-left",children:"Quantity :"}),(0,y.jsx)("input",{type:"email",className:"form-control form-control-solid",placeholder:""})]}),(0,y.jsxs)("div",{className:"fv-row mb-10",children:[(0,y.jsx)("label",{className:"form-label fs-6 fw-bolder text-dark text-left",children:"Price :"}),(0,y.jsx)("input",{type:"email",className:"form-control form-control-solid",placeholder:""})]}),(0,y.jsx)("button",{type:"submit",id:"kt_sign_in_submit",className:"btn btn-lg btn-primary w-40 mb-5",children:(0,y.jsx)("span",{className:"indicator-label",children:"Submit"})})]})]})]})})})]})})}))}}]);
//# sourceMappingURL=852.0d0f33bd.chunk.js.map
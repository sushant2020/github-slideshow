"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[229],{3229:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var s=a(65043),r=a(424),o=a(99442),l=a(41030),n=a(40411),c=a(70579);l.t1.register(l.hE,l.m_,l.No,l.s$,l.PP,l.kc,l.FN);const i=e=>{const{graphFlag:t,data:a,data1:r,options:o}=e;return(0,c.jsx)(s.Fragment,{children:t&&(0,c.jsx)("div",{className:"row g-5 gx-xxl-8",children:(0,c.jsx)("div",{className:"col-xxl-12",children:(0,c.jsx)("div",{className:"card-xxl-stretch mb-5 mb-xxl-8",children:(0,c.jsx)("div",{className:"row gy-5 g-xl-4",children:(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)("div",{className:"card-header border-0 pt-2",children:(0,c.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,c.jsx)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:"PO Graph"})})}),(0,c.jsx)("div",{className:"card-body py-3 h-600px ",style:{marginLeft:"5%",marginRight:"5%"},children:(0,c.jsx)(n.yP,{data:null!=r.data?r.data:a.data,width:50,height:50,options:o})})]})})})})})})};var d=a(89330),p=a(39470),h=a(87104),m=a(61966),u=a(50525),x=a(86904),b=a(15627),j=a(30460),g=a(47419),N=a(11645),A=a(78186),y=a(92584),f=a(5397),w=a(89421),v=a(82217),P=a(28671),S=a.n(P),C=a(94539),_=a(57284),O=a(44864),k=a(5766),T=a.n(k),D=a(86178),I=a.n(D);let R="",L="";const Y=e=>{const{RangePicker:t}=u.A,{onSearchPO:a,tabSelected:o,ondateSelect:l,settabSelected:n,POsortPNflag:i,onSortpoTable:P,POsortPN:k,POsortSC:D,POsortSCflag:Y,POsortRA:M,POsortRAflag:E,POsortSTATUS:B,POsortSTATUSflag:F,AllPOs:U,ApprovalPending:z,OnPoSelected:H,POAction:q,loadingPOItems:W,AllPOItem:Q,PONumberSelected:J,onDownloadCsv:Z,showbuttons:V,openModal:G,showModal:$,AllPOHistorical:K,AllPOItemH:X,PONumberSelectedH:ee,POQ:te,POPr:ae,POsortPNh:se,POsortPNflagh:re,POsortSCflagh:oe,POsortSCh:le,POsortRAh:ne,POsortRAflagh:ce,POsortPNap:ie,POsortPNflagap:de,POsortSCflagap:pe,POsortSCap:he,POsortRAap:me,POsortRAflagap:ue,AllPOItemApprovalPending:xe,AllPOItemTableApprovalPendiong:be,PONumberSelectedApprovalPending:je,HideApprovalPendingPoItem:ge,polistLoader:Ne,ToolTipApprovedBy:Ae,ToolTipApprovedAt:ye,ToolTipDownloadBy:fe,ToolTipDownloadAt:we,showModalDownload:ve,setAllPOs:Pe}=e,[Se,Ce]=(0,s.useState)([]),[_e,Oe]=(0,s.useState)([]),[ke,Te]=(0,s.useState)(""),[De,Ie]=(0,s.useState)(!1),[Re,Le]=(0,s.useState)(!1),[Ye,Me]=(0,s.useState)(""),[Ee,Be]=(0,s.useState)(""),[Fe,Ue]=(0,s.useState)(!1),ze=()=>{Le(!1),Ce([]),Ie(!1)},He=()=>{We(1),Qe(),Le(!1)},qe=e=>{Ue(!0);let t=new Array;e.map((e=>{t.push(e.po_id)}));let a={pos:t};try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/download-pos"),{method:"post",headers:{Authorization:"Bearer ".concat(L),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){200==e.status&&e.json().then((function(e){Oe(e.data.poitems),Be(e.data.all_completed),Me(e.data.all_downloaded),Te(e.data.filename),Ue(!1)}))})).catch((function(e){console.log("Fetch Error :-S",e)}))}catch(s){console.log("ERR>>>",s)}},We=e=>{let t={is_completed:e};try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/download-update-allpo-status"),{method:"put",headers:{Authorization:"Bearer ".concat(L),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200==e.status&&e.json().then((function(e){b.Ay.success(e.message),Je()}))})).catch((function(e){console.log("Fetch Error :-S",e)}))}catch(a){console.log("ERR>>>",a)}},Qe=()=>{var e,t={fields:["po_ref_id","po_item_id","supplier","product_desc","product_code","quantity","price","created_at"],data:_e.length>0?_e:[]},a=T().unparse(t),s=new Blob([a],{type:"text/csv;charset=utf-8;"});e=window.URL.createObjectURL(s);var r=document.createElement("a");r.href=e,r.setAttribute("download","".concat(ke,".csv")),r.click(),Ce([]),Ie(!1),Je(),Pe(U);const o=setTimeout((()=>{window.location.reload()}),2e3);clearTimeout(o)},Je=()=>{try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/allpos"),{method:"get",headers:{Authorization:"Bearer ".concat(L),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200!=e.status&&(localStorage.clear(),window.location.reload()),e.json().then((function(e){}))})).catch((function(e){}))}catch(e){}};return R=JSON.parse(localStorage.getItem("portalUserDataRole")||""),L=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,c.jsx)(s.Fragment,{children:1==Ne?(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)(j.A,{loading:Ne,active:!0}),(0,c.jsx)(j.A,{loading:Ne,active:!0}),(0,c.jsx)(j.A,{loading:Ne,active:!0})]}):(0,c.jsxs)("div",{className:"row g-5 gx-xxl-8",style:{marginTop:"1%"},children:[(0,c.jsx)("div",{className:"col-xxl-12",children:(0,c.jsx)("div",{className:"card-xxl-stretch mb-5 mb-xxl-8",children:(0,c.jsx)("div",{className:"row gy-5 g-xl-4",children:(0,c.jsxs)("div",{className:"card",children:[(0,c.jsxs)("div",{className:"card-header border-0 pt-2",children:[(0,c.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,c.jsx)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:"PO List"})}),(0,c.jsx)("div",{className:"d-none d-sm-none d-md-block",children:(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(r.N_,{to:{pathname:"/concerto-mapping"},children:(0,c.jsx)("a",{href:"#",className:"btn  btn-sm btn-primary",children:"Update Concerto Reference"})})})}),(0,c.jsx)("div",{className:"d-sm-block d-md-none",children:(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(r.N_,{to:{pathname:"/concerto-mapping"},children:(0,c.jsx)("a",{href:"#",className:"btn  btn-sm btn-primary",children:"Update Concerto Reference"})})})}),(0,c.jsx)("div",{className:"d-none d-sm-none d-md-block",children:(0,c.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,c.jsx)("input",{type:"search",onChange:a,className:"form-control form-control-solid",placeholder:"Search by PO Number /Supplier Code /Raised By",tabIndex:10})})}),(0,c.jsx)("div",{className:"d-sm-block d-md-none",children:(0,c.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,c.jsx)("input",{type:"search",onChange:a,className:"form-control form-control-solid",placeholder:"Search by PO Number /Supplier Code /Raised By",tabIndex:10})})}),(0,c.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"filter by Date",children:"Latest"==o||"Historical"==o?(0,c.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"",children:(0,c.jsx)(t,{onChange:e=>l(e)})}):""}),(0,c.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Click to Create New PO"})]}),(0,c.jsxs)("div",{className:"card-body py-3 ",children:[(0,c.jsxs)("ul",{className:"nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-8",children:[(0,c.jsx)("li",{className:"nav-item",children:(0,c.jsx)("a",{className:"nav-link text-active-primary pb-4 active","data-bs-toggle":"tab",href:"#latestPO",onClick:()=>n("Latest"),children:"Latest"})}),(0,c.jsx)("li",{className:"nav-item",children:(0,c.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#historicalPO",onClick:()=>n("Historical"),children:"Historical"})}),"Administrator"==R&&(0,c.jsx)("li",{className:"nav-item",children:(0,c.jsx)("a",{className:"nav-link text-active-primary pb-4","data-kt-countup-tabs":"true","data-bs-toggle":"tab",href:"#ApprovalPending",onClick:()=>n("ApprovalPending"),children:"Approval Pending"})})]}),(0,c.jsxs)("div",{className:"tab-content",id:"myTabContent",children:[(0,c.jsxs)("div",{className:"tab-pane fade show active",id:"latestPO",role:"tabpanel",children:[(0,c.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,c.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",(0,c.jsxs)("sub",{className:"",style:{color:"black"},children:[U.length>0&&(0,c.jsx)(c.Fragment,{children:"(Last 3 week)"}),De&&(0,c.jsxs)("a",{onClick:e=>{Le(!0),qe(Se)},className:"btn btn-sm btn-primary",style:{marginLeft:"30px"},"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Download PO",children:[(0,c.jsx)("i",{className:"fas fa-download fs-4 me-2"})," Download"]})]})]})}),(0,c.jsxs)(g.A,{children:[(0,c.jsx)(N.A,{span:12,children:U.length>0?(0,c.jsx)("div",{className:"table-responsive h-600px table-scroll",children:(0,c.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table cursor-pointer",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"min-w-20px"}),(0,c.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>P(k),children:["PO-Number"," ","Desc"!=i?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsxs)("th",{className:"min-w-50px cursor-pointer",onClick:()=>P(D),children:["Supplier Code","Desc"!=Y?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsx)("th",{className:"min-w-100px",children:"Raised By"}),(0,c.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>P(M),children:["Raised At"," ","Desc"!=E?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>P(B),children:["Status"," ","Desc"!=F?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]})]})}),(0,c.jsx)("tbody",{children:void 0!=U&&U.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:0==e.status||1==e.status?"":(0,c.jsx)(A.A,{onChange:()=>(e=>{let t=new Array;if(t=[...Se],t.length<=0)t.push(e),Ce(t);else{let a=t.findIndex((t=>t.po_id==e.po_id));-1==a?(t.push(e),Ce(t)):(t.splice(a,1),Ce(t))}t.length>0?Ie(!0):Ie(!1)})(e),checked:-1!=Se.findIndex((t=>t.po_id==e.po_id))})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link cursor-pointer",onClick:()=>H(e),children:e.po_num})}),(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/supplier",state:{id:e.supplier_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.code})})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_by?e.created_by:"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_at?I()(e.created_at).format("DD-MMM-YYYY"):"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"d-flex flex-shrink-0",children:"0"==e.status?(0,c.jsx)(y.A,{placement:"topLeft",title:"Would you like to mark PO as approval pending",onConfirm:()=>q(e),okText:"Yes",cancelText:"No",children:(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-warning fw-bold btn-sm me-1 min-w-100px",title:"Mark PO as Approval Pending",children:"In Progress"})}):"1"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",title:"Mark PO as Approved",style:{cursor:"text"},children:"APRROVAL PENDING"}):"2"==e.status?(0,c.jsx)(y.A,{placement:"topLeft",title:"Would you like to mark PO as completed",onConfirm:()=>q(e),okText:"Yes",cancelText:"No",children:(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-primary fw-bold btn-sm me-1 min-w-100px",title:"Mark PO as Completed",children:"APPROVED"})}):"3"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-success fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Complete"}):"-"})})]})))})]})}):(0,c.jsx)("div",{children:(0,c.jsx)("h5",{children:"No any PO items available"})})}),(0,c.jsx)(N.A,{span:11,offset:1,children:(0,c.jsx)("div",{children:W?(0,c.jsx)("div",{style:{margin:"25% 50% 50% 50%"},children:(0,c.jsx)(f.A,{tip:"Loading...",size:"large",style:{justifyContent:"center"}})}):(0,c.jsx)(s.Fragment,{children:(0,c.jsx)("div",{className:"table-responsive  h-600px table-scroll",children:U.length>0&&(0,c.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[Q.length>0&&(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"w-20px",children:(0,c.jsx)(w.A,{type:"dashed",style:{color:"rgb(138, 38, 80)",cursor:"text"},children:J})}),(0,c.jsx)("th",{className:"min-w-100px"}),(0,c.jsx)("th",{className:"min-w-100px"}),(0,c.jsx)("th",{className:"min-w-70px"}),(0,c.jsx)("th",{className:"min-w-70px",children:0!=V?(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)(d.A,{style:{marginRight:"5px",fontSize:"22px"},className:"text-primary",onClick:ve,"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Download PO",id:"csv-button"}),(0,c.jsx)(p.A,{className:"primary",style:{color:"#0000FF"},"data-bs-toggle":"tooltip","data-bs-placement":"top",onClick:()=>{x.A.info({message:"Information",description:""!==we?(0,c.jsxs)(s.Fragment,{children:["Approved By -",Ae,(0,c.jsx)(s.Fragment,{children:(0,c.jsx)("br",{})}),"Approved At -",I()(ye).format("DD-MMM-YYYY"),(0,c.jsx)(s.Fragment,{children:(0,c.jsx)("br",{})}),"Downloaded By -",fe,(0,c.jsx)(s.Fragment,{children:(0,c.jsx)("br",{})}),"Downloaded At -",I()(we).format("DD-MMM-YYYY"),(0,c.jsx)(s.Fragment,{children:(0,c.jsx)("br",{})})]}):(0,c.jsxs)(s.Fragment,{children:["Approved By -",Ae,(0,c.jsx)(s.Fragment,{children:(0,c.jsx)("br",{})}),"Approved At -",I()(ye).format("DD-MMM-YYYY"),(0,c.jsx)(s.Fragment,{children:(0,c.jsx)("br",{})})]})})},title:""!==we?"Approved By - "+Ae+"\r\nApproved At - "+I()(ye).format("DD-MMM-YYYY")+"\r\nDownloaded By - "+fe+"\r\nDownloaded At - "+I()(we).format("DD-MMM-YYYY")+"\r\n":"Approved By - "+Ae+"\r\nApproved At - "+I()(ye).format("DD-MMM-YYYY")+"\r\n"})]}):""}),(0,c.jsx)("th",{children:0==V?(0,c.jsx)("div",{id:"create-po-button",children:(0,c.jsx)(h.A,{style:{marginRight:"5px",fontSize:"22px"},className:"text-primary","data-bs-placement":"Top","data-bs-trigger":"hover",title:"Add PO",onClick:()=>{G()}})}):""})]})}),(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"min-w-100px",children:"Supplier"}),(0,c.jsx)("th",{className:"min-w-100px",children:"Product Code"}),(0,c.jsx)("th",{className:"min-w-100px",children:"Product Description"}),(0,c.jsx)("th",{className:"min-w-70px",children:" Quantity"}),(0,c.jsx)("th",{className:"min-w-70px",children:" Price"})]})}),(0,c.jsx)("tbody",{children:void 0!=Q&&"Latest"==o&&Q.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/supplier",state:{id:e.supplier_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.supplier})})}),(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/product",state:{prod_id:e.prod_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.product_code?e.product_code:"-"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(S(),{lines:1,more:"Show more",less:"Show less",anchorClass:"",children:e.desc?e.desc:"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.quantity})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:_.A.addZero(e.price)?_.A.addZero(e.price):"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:0==V?(0,c.jsx)(m.A,{style:{color:"red",marginRight:"5px",fontSize:"18px"},"data-bs-placement":"Top","data-bs-trigger":"hover",title:"Delete",onClick:()=>$(e)}):(0,c.jsx)(m.A,{style:{color:"red",marginRight:"5px",fontSize:"18px",display:"none"},"data-bs-placement":"Top","data-bs-trigger":"hover",title:"Delete",onClick:()=>$(e)})})})]})))})]})})})})})]})]}),(0,c.jsxs)("div",{className:"tab-pane fade",id:"historicalPO",role:"tabpanel",children:[(0,c.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,c.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",(0,c.jsx)("sub",{className:"",style:{color:"black"},children:"(Older than 3 week)"})]})}),(0,c.jsxs)(g.A,{children:[(0,c.jsx)(N.A,{span:11,children:(0,c.jsx)("div",{className:"table-responsive  h-600px table-scroll",children:(0,c.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"w-10px"}),(0,c.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>P(se),children:["PO-Number"," ","Desc"!=re?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsxs)("th",{className:"min-w-50px cursor-pointer",onClick:()=>P(le),children:["Supplier Code","Desc"!=oe?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsx)("th",{className:"min-w-100px",children:"Raised By"}),(0,c.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>P(ne),children:["Raised At"," ","Desc"!=ce?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsx)("th",{className:"min-w-80px cursor-pointer",children:"Status"})]})}),(0,c.jsx)("tbody",{children:void 0!=K&&"Historical"==o&&K.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link cursor-pointer",onClick:()=>H(e),children:e.po_num})}),(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/supplier",state:{id:e.supplier_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.code})})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_by?e.created_by:"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_at?I()(e.created_at).format("DD-MMM-YYYY"):"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"d-flex flex-shrink-0",children:"0"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-warning fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"In Progress"}):"1"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Approval Pending"}):"2"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-primary fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Approved"}):"3"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-success fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Complete"}):"4"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Expired"}):"-"})})]})))})]})})}),(0,c.jsx)(N.A,{span:12,offset:1,children:(0,c.jsx)("div",{className:"table-responsive  h-600px table-scroll",children:W?(0,c.jsx)("div",{style:{margin:"25% 50% 50% 50%"},children:(0,c.jsx)(f.A,{tip:"Loading...",size:"large",style:{justifyContent:"center"}})}):(0,c.jsxs)(s.Fragment,{children:[X.length>0&&(0,c.jsx)(w.A,{type:"dashed",style:{color:"rgb(138, 38, 80)",cursor:"text"},children:ee}),(0,c.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"min-w-100px",children:"Supplier"}),(0,c.jsx)("th",{className:"min-w-100px",children:"Product Code"}),(0,c.jsx)("th",{className:"min-w-100px",children:"Product Description"}),(0,c.jsx)("th",{className:"min-w-70px",onClick:()=>P(te),children:"Quantity"}),(0,c.jsx)("th",{className:"min-w-70px",onClick:()=>P(ae),children:"Price"})]})}),(0,c.jsx)("tbody",{children:void 0!=X&&X.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/supplier",state:{id:e.supplier_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.supplier})})}),(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/product",state:{prod_id:e.prod_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.product_code?e.product_code:"-"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(S(),{lines:1,more:"Show more",less:"Show less",anchorClass:"",children:e.desc?e.desc:"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.quantity})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:_.A.addZero(e.price)?_.A.addZero(e.price):"-"})})]})))})]})]})})})]})]}),(0,c.jsxs)("div",{className:"tab-pane fade",id:"ApprovalPending",role:"tabpanel",children:[(0,c.jsx)("h3",{className:"card-title align-items-start flex-column"}),(0,c.jsxs)(g.A,{children:[(0,c.jsx)(N.A,{span:11,children:(0,c.jsx)("div",{className:"table-responsive  h-600px table-scroll",children:z.length>0?(0,c.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"w-10px"}),(0,c.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>P(ie),children:["PO-Number"," ","Desc"!=de?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsxs)("th",{className:"min-w-50px cursor-pointer",onClick:()=>P(he),children:["Supplier Code","Desc"!=pe?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsx)("th",{className:"min-w-100px",children:"Raised By"}),(0,c.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>P(me),children:["Raised At"," ","Desc"!=ue?(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,c.jsx)(C.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,c.jsx)("th",{className:"min-w-80px cursor-pointer",children:"Status "})]})}),(0,c.jsx)("tbody",{children:void 0!=z&&"ApprovalPending"==o&&z.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link cursor-pointer",onClick:()=>H(e),children:e.po_num})}),(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/supplier",state:{id:e.supplier_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.code})})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_by?e.created_by:"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_at?I()(e.created_at).format("DD-MMM-YYYY"):"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"d-flex flex-shrink-0",children:"0"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-warning fw-bold btn-sm me-1 min-w-100px",title:"Mark PO as Approval Pending",onClick:()=>q(e),children:"In Progress"}):"1"==e.status?(0,c.jsx)(y.A,{placement:"topLeft",title:"Would you like to mark PO as approved ?",onConfirm:()=>q(e),okText:"Yes",cancelText:"No",children:(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",title:"Mark PO as Approved",children:"APRROVAL PENDING"})}):"2"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-primary fw-bold btn-sm me-1 min-w-100px",title:"Revert To Completed",children:"APPROVED"}):"3"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-success fw-bold btn-sm me-1 min-w-100px",title:"Revert To Pending",style:{cursor:"text"},children:"Complete"}):"4"==e.status?(0,c.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",title:"Revert To Approved",style:{cursor:"text"},children:"Expired"}):"-"})})]})))})]}):(0,c.jsx)("h5",{children:"No any PO items available"})})}),(0,c.jsx)(N.A,{span:11,offset:1,children:z.length>0?(0,c.jsx)("div",{className:"table-responsive  h-600px table-scroll",children:W?(0,c.jsx)("div",{style:{margin:"25% 50% 50% 50%"},children:(0,c.jsx)(f.A,{tip:"Loading...",size:"large",style:{justifyContent:"center"}})}):(0,c.jsx)(s.Fragment,{children:0==ge?(0,c.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"w-20px",children:(0,c.jsx)(w.A,{type:"dashed",style:{color:"rgb(138, 38, 80)",cursor:"text"},children:je})}),(0,c.jsx)("th",{className:"min-w-100px"}),(0,c.jsx)("th",{className:"min-w-70px"}),(0,c.jsx)("th",{className:"min-w-70px"}),(0,c.jsx)("th",{})]})}),(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"min-w-100px",children:"Supplier"}),(0,c.jsx)("th",{className:"min-w-100px",children:"Product Code"}),(0,c.jsx)("th",{className:"min-w-100px",children:"Product Description"}),(0,c.jsx)("th",{className:"min-w-70px",children:" Quantity"}),(0,c.jsx)("th",{className:"min-w-70px",children:" Price"})]})}),(0,c.jsx)("tbody",{children:void 0!=xe&&"ApprovalPending"==o&&be.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/supplier",state:{id:e.supplier_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.supplier})})}),(0,c.jsx)("td",{children:(0,c.jsx)(r.N_,{to:{pathname:"/product",state:{prod_id:e.prod_id}},children:(0,c.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.product_code?e.product_code:"-"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(S(),{lines:1,more:"Show more",less:"Show less",anchorClass:"",children:e.desc?e.desc:"-"})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.quantity})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:_.A.addZero(e.price)?_.A.addZero(e.price):"-"})})]})))})]}):(0,c.jsx)(s.Fragment,{children:(0,c.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"w-20px"}),(0,c.jsx)("th",{className:"min-w-100px"}),(0,c.jsx)("th",{className:"min-w-70px"}),(0,c.jsx)("th",{className:"min-w-70px"})]})}),(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,c.jsx)("th",{className:"min-w-100px",children:"Supplier"}),(0,c.jsx)("th",{className:"min-w-100px",children:"Product Code"}),(0,c.jsx)("th",{className:"min-w-70px",children:" Quantity"}),(0,c.jsx)("th",{className:"min-w-70px",children:" Price"})]})}),(0,c.jsx)("tbody",{})]})})})}):""})]})]})]})]})]})})})}),(0,c.jsx)(v.A,{title:"",visible:Re,onCancel:ze,footer:0==Ye&&0==Ee||1==Ye&&0==Ee?[(0,c.jsx)(w.A,{type:"primary",onClick:He,children:"Yes"},"submit"),(0,c.jsx)(w.A,{type:"primary",onClick:()=>{We(0),Qe(),Le(!1)},children:"No"}),(0,c.jsx)(w.A,{onClick:ze,children:"Cancel"},"back")]:[(0,c.jsx)(w.A,{type:"primary",onClick:He,children:"Yes"},"submit"),(0,c.jsx)(w.A,{type:"primary",onClick:ze,children:"No"})],children:1==Fe?(0,c.jsx)(f.A,{tip:"Loading...",size:"large",spinning:Fe}):(0,c.jsx)(s.Fragment,{children:0==Ye&&0==Ee?(0,c.jsxs)("p",{children:['You are going to download the csv for these POs. Would you like to mark these POs as "COMPLETED"?'," "]}):0==Ye&&1==Ee?(0,c.jsx)("p",{children:" Would you like to download these POs? "}):1==Ye&&0==Ee?(0,c.jsxs)("p",{children:[" ","POs already downloded would you like to download it again and mark these Pos as 'Completed'?"," "]}):(0,c.jsx)("p",{children:" POs already downloded would you like to download it again ?"})})})]})})};var M=a(94406),E=a(60521),B=a(50289),F=a(26655),U=a(3428),z=(a(60919),a(75337));l.t1.register(...l.$L);const{Option:H}=M.A,{Search:q}=E.A,{RangePicker:W}=u.A;let Q=0,J="";const Z=(0,o.y)((e=>{const[t,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),[n,d]=(0,s.useState)([]),[p,h]=(0,s.useState)(!1),[m,u]=(0,s.useState)(!1),[x,A]=(0,s.useState)([]),[y,P]=(0,s.useState)([]),[S,_]=(0,s.useState)([]),[k,D]=(0,s.useState)([]),[R,L]=(0,s.useState)([]),[q,W]=(0,s.useState)([]),[Z,V]=(0,s.useState)("Latest"),[G,$]=(0,s.useState)([]),[K,X]=(0,s.useState)([]),[ee,te]=(0,s.useState)([]),[ae,se]=(0,s.useState)([]),[re,oe]=(0,s.useState)([]),[le,ne]=(0,s.useState)([]),[ce,ie]=(0,s.useState)([]),[de,pe]=(0,s.useState)([]),[he,me]=(0,s.useState)([]),[ue,xe]=(0,s.useState)([]),[be,je]=(0,s.useState)([]),[ge,Ne]=(0,s.useState)([]),[Ae,ye]=(0,s.useState)([]),[fe,we]=(0,s.useState)([]),[ve,Pe]=(0,s.useState)([]),[Se,Ce]=(0,s.useState)(""),[_e,Oe]=(0,s.useState)(""),[ke,Te]=(0,s.useState)(""),[De,Ie]=(0,s.useState)([]),[Re,Le]=(0,s.useState)(!1),[Ye,Me]=(0,s.useState)(!1),[Ee,Be]=(0,s.useState)(!1),[Fe,Ue]=(0,s.useState)(!1),[ze,He]=(0,s.useState)(!1),[qe,We]=(0,s.useState)(""),[Qe,Je]=(0,s.useState)(""),[Ze,Ve]=(0,s.useState)(""),[Ge,$e]=(0,s.useState)(""),[Ke,Xe]=(0,s.useState)(""),[et,tt]=(0,s.useState)("Price"),[at,st]=(0,s.useState)("Qty"),[rt,ot]=(0,s.useState)(!1),[lt,nt]=(0,s.useState)(!1),[ct,it]=(0,s.useState)([]),[dt,pt]=(0,s.useState)(""),[ht,mt]=(0,s.useState)(!1),[ut,xt]=(0,s.useState)(!1),[bt,jt]=(0,s.useState)(!1),[gt,Nt]=(0,s.useState)(!0),[At,yt]=(0,s.useState)({}),[ft,wt]=(0,s.useState)(""),[vt,Pt]=(0,s.useState)(""),[St,Ct]=(0,s.useState)("PN"),[_t,Ot]=(0,s.useState)("ASC"),[kt,Tt]=(0,s.useState)("RA"),[Dt,It]=(0,s.useState)("ASC"),[Rt,Lt]=(0,s.useState)("SC"),[Yt,Mt]=(0,s.useState)("ASC"),[Et,Bt]=(0,s.useState)("PNh"),[Ft,Ut]=(0,s.useState)("ASC"),[zt,Ht]=(0,s.useState)("RAh"),[qt,Wt]=(0,s.useState)("ASC"),[Qt,Jt]=(0,s.useState)("SCh"),[Zt,Vt]=(0,s.useState)("ASC"),[Gt,$t]=(0,s.useState)("PNap"),[Kt,Xt]=(0,s.useState)("ASC"),[ea,ta]=(0,s.useState)("RAap"),[aa,sa]=(0,s.useState)("ASC"),[ra,oa]=(0,s.useState)("SCap"),[la,na]=(0,s.useState)("ASC"),[ca,ia]=(0,s.useState)("STATUS"),[da,pa]=(0,s.useState)("ASC"),[ha,ma]=(0,s.useState)(""),[ua,xa]=(0,s.useState)(""),[ba,ja]=(0,s.useState)(""),[ga,Na]=(0,s.useState)(""),[Aa,ya]=(0,s.useState)(!1),[fa,wa]=(0,s.useState)(""),[va,Pa]=(0,s.useState)(""),[Sa,Ca]=(0,s.useState)(!1),[_a,Oa]=(0,s.useState)(!1),[ka,Ta]=(0,s.useState)(!0),[Da,Ia]=(0,s.useState)({}),[Ra,La]=(0,s.useState)({data:{labels:["","","","",""],datasets:[{label:"Last Month",backgroundColor:"rgba(2,59,153,1)",borderColor:"rgba(255,99,132,1)",borderWidth:1,categoryPercentage:1,barPercentage:.8,bar:1,hoverBackgroundColor:"rgba(66,133,244,1)",hoverBorderColor:"rgba(255,99,132,1)",data:[0,0,0,0,0]},{label:"Current Month",backgroundColor:"rgba(71,17,43,1)",borderColor:"rgba(71,17,43,1)",borderWidth:1,categoryPercentage:1,barPercentage:.8,bar:1,hoverBackgroundColor:"rgba(71,17,43,0.5)",hoverBorderColor:"rgba(71,17,43,0.5)",data:[0,0,0,0,0]}]}}),[Ya,Ma]=(0,s.useState)(!1);(0,s.useEffect)((()=>{Ya||(Ea(),pe([]),me([]),V("Latest"),Ua(),Ba(),d([]),Ma(!0))}),[]);const Ea=()=>{Nt(!0),fetch("".concat(O.u.MAIN_ENDPOINT,"/api/allpos"),{method:"get",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json",fetchPolicy:"network-only"}}).then((function(e){200!=e.status&&(localStorage.clear(),window.location.reload()),e.json().then((function(e){A(e.data.latest),D(e.data.latest),P(e.data.approval_pending),_(e.data.approval_pending),Fa(e.data.latest),L(e.data.historical),W(e.data.historical),Nt(!1)}))})).catch((function(e){a(!1)}))},Ba=()=>{a(!0);try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/get-po-insight"),{method:"get",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200!=e.status)return Ta(!1),void a(!1);e.json().then((function(e){var t={data:{labels:e.data.po_insight.labels,datasets:[{label:"Last Month",backgroundColor:"rgba(2,59,153,1)",borderColor:"rgba(2,59,153,1)",borderWidth:1,categoryPercentage:.1,barPercentage:.8,bar:.1,hoverBackgroundColor:"rgba(2,59,153,0.8)",hoverBorderColor:"rgba(2,59,153,0.8)",data:e.data.po_insight.datasets.current},{label:"Current Month",backgroundColor:"rgba(71,17,43,1)",borderColor:"rgba(71,17,43,1)",borderWidth:1,categoryPercentage:.1,barPercentage:.8,bar:.1,hoverBackgroundColor:"rgba(71,17,43,0.8)",hoverBorderColor:"rgba(71,17,43,0.8)",data:e.data.po_insight.datasets.last}]}};yt(t.data),Ia(t),Ta(!0),a(!1)}))})).catch((function(e){}))}catch(e){}},Fa=e=>{let t=new Array,a=new Array,s=new Array,r=new Array;e.map((e=>{let o={PO_ID:e.po_id,Supplier:e.supplier,ProductCode:e.product_code,Quantity:e.quantity,Price:e.price,Notes:e.notes};if(a.length<=0){let t={value:e.supplier,label:e.supplier};a.push(t)}else{if(void 0==a.find((t=>t.supplier==e.supplier))){let t={value:e.supplier,label:e.supplier};a.push(t)}}if(s.length<=0)s.push({id:e.status,status:0==e.status?"Pending":"Approved"});else{void 0==s.find((t=>t.id==e.status))&&s.push({id:e.status,status:0==e.status?"Pending":"Approved"})}if(r.length<=0)r.push({value:e.product_code,label:e.product_code});else{void 0==r.find((t=>t.product_code==e.product_code))&&r.push({value:e.product_code,label:e.product_code})}t.push(o)})),$(t),oe(a),ne(s),ie(r)},Ua=()=>{try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/get-ac-products"),{method:"get",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){let t=new Array;e.data.ac4.map(((e,a)=>{let s={value:"".concat(e.parent_product_code," - ").concat(e.desc),label:"".concat(e.parent_product_code," - ").concat(e.desc)};t.push(s)})),X(t)}))})).catch((function(e){a(!1)}))}catch(e){}try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/get-suppliers"),{method:"get",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){let t=new Array;e.data.supplier.map(((e,a)=>{let s={value:e.id,label:e.supplier};t.push(s)})),te(t)}))})).catch((function(e){a(!1)}))}catch(e){}},za=(e,t)=>{let s={is_completed:t};try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/download-update-po-status/").concat(e),{method:"put",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){200==e.status&&e.json().then((function(e){b.Ay.success(e.message),Ea()}))})).catch((function(e){console.log("Fetch Error :-S",e),a(!1)}))}catch(r){console.log("ERR>>>",r)}},Ha=()=>{let e=new Array;"Latest"==Z&&(de.length>0?de.map((t=>{let a={PONUMBER:Se,SUPPLIER:t.supplier,DISCRIPTION:t.desc,PRODUCTCODE:t.product_code,QUANTITY:t.quantity,PRICE:t.price,CREATEDATE:t.created_at};e.push(a)})):ue.map((t=>{let a={PONUMBER:Se,SUPPLIER:t.supplier,DISCRIPTION:t.desc,PRODUCTCODE:t.product_code,QUANTITY:t.quantity,PRICE:t.price,CREATEDATE:t.created_at};e.push(a)})));var t,a={fields:["PONUMBER","SUPPLIER","DISCRIPTION","PRODUCTCODE","QUANTITY","PRICE","CREATEDATE"],data:e.length>0?e:[]},s=T().unparse(a),r=new Blob([s],{type:"text/csv;charset=utf-8;"});t=window.URL.createObjectURL(r);var o=document.createElement("a");o.href=t,o.setAttribute("download","".concat(Se,".csv")),o.click(),pe([])};function qa(){Le(!1),Me(!1),Be(!1),Ue(!1),h(!1)}function Wa(e){wa(e.po_id),Pa(e.status),"1"==e.is_downloaded?(ya(!0),ma(e.verified_by),xa(e.verified_at),ja(e.updated_by),Na(e.updated_at)):(ya(!1),ma(e.verified_by),xa(e.verified_at),ja(""),Na("")),"Latest"!=Z&&"ApprovalPending"!=Z||(0==e.status||1==e.status||void 0==e.status?mt(!1):mt(!0)),"ApprovalPending"==Z&&(0==e.status||1==e.status||void 0==e.status?(xt(!0),jt(!1)):xt(!1));let t=e;Pt(t.supplier_id),l(!0);try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/get-poitems/").concat(e.po_id),{method:"get",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){404!=e.status&&200==e.status?e.json().then((function(s){404==e.status&&(Ea(),a(!1)),"Latest"==Z&&(wt(s.data[0].supplier),xe(s.data),je(s.data),Ce(t.po_num),pt(t.po_id)),"Historical"==Z&&(Ne(s.data),Pe(s.data),Oe(t.po_num),pt(t.po_id)),"ApprovalPending"==Z&&(wt(s.data[0].supplier),ye(s.data),we(s.data),Te(t.po_num),pt(t.po_id)),l(!1)})):l(!1)})).catch((function(e){a(!1)}))}catch(s){a(!1)}}const Qa=()=>{za(fa,1),Ha(),nt(!1),Ca(!0);const e=setTimeout((()=>{window.location.reload()}),2e3);clearTimeout(e)},Ja=()=>{nt(!1)};return J=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,c.jsx)(s.Fragment,{children:1==t?(0,c.jsx)(s.Fragment,{children:(0,c.jsx)(j.A,{loading:t,active:!0})}):(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)("div",{className:"d-none d-sm-none d-md-block",children:(0,c.jsxs)(g.A,{children:[(0,c.jsx)(N.A,{span:20,children:(0,c.jsxs)("ol",{className:"breadcrumb breadcrumb-dot fs-6 fw-bold",style:{margin:"1%"},children:[(0,c.jsx)(r.N_,{to:"/home",className:"pe-1 cursor-pointer",children:(0,c.jsx)("li",{className:"breadcrumb-item pe-1",children:"Home"})}),"/ \xa0",(0,c.jsx)("li",{className:"breadcrumb-item pe-3",children:"PO List"})]})}),(0,c.jsx)(N.A,{children:(0,c.jsx)(r.N_,{to:{pathname:"/poItems"},children:(0,c.jsx)("button",{className:"btn btn-sm btn-primary ",children:"Go To PO Items"})})})]})}),(0,c.jsx)("div",{className:"d-sm-block d-md-none",children:(0,c.jsxs)(g.A,{children:[(0,c.jsx)(N.A,{span:14,children:(0,c.jsxs)("ol",{className:"breadcrumb breadcrumb-dot fs-6 fw-bold",style:{margin:"1%"},children:[(0,c.jsx)(r.N_,{to:"/home",className:"pe-1 cursor-pointer",children:(0,c.jsx)("li",{className:"breadcrumb-item pe-1",children:"Home"})}),"/ \xa0",(0,c.jsx)("li",{className:"breadcrumb-item pe-3",children:"PO List"})]})}),(0,c.jsx)(N.A,{span:10,children:(0,c.jsx)(r.N_,{to:{pathname:"/poItems"},children:(0,c.jsx)("button",{className:"btn btn-sm btn-primary ",children:"Go To PO Items"})})})]})}),(0,c.jsx)(Y,{HideItemLatest:Sa,onSearchPO:e=>{let t=e.target.value,a=new Array;"Latest"==Z&&(x.map((e=>{(e.po_num.toLowerCase().includes(t.toLowerCase())||e.created_by.toLowerCase().includes(t.toLowerCase())||null!==e.code&&e.code.toLowerCase().includes(t.toLowerCase()))&&a.push(e)})),A(a),""==t&&A(k)),"Historical"==Z&&(R.map((e=>{(e.po_num.toLowerCase().includes(t.toLowerCase())||e.created_by.toLowerCase().includes(t.toLowerCase())||null!==e.code&&e.code.toLowerCase().includes(t.toLowerCase()))&&a.push(e)})),L(a),""==t&&L(q)),"ApprovalPending"==Z&&(y.map((e=>{(e.po_num.toLowerCase().includes(t.toLowerCase())||e.created_by.toLowerCase().includes(t.toLowerCase())||null!==e.code&&e.code.toLowerCase().includes(t.toLowerCase()))&&a.push(e)})),P(a),""==t&&P(S))},tabSelected:Z,ondateSelect:e=>{let t="Latest"==Z?k:R;if(e){let a=I()(e[0]).format("YYYY-MM-DD"),s=I()(e[1]).format("YYYY-MM-DD");Xe(e);let r=new Array;"Latest"==Z&&("Invalid date"!=a?(t.map((e=>{I()(e.created_at).format("YYYY-MM-DD")>=a&&I()(e.created_at).format("YYYY-MM-DD")<=s&&r.push(e)})),A(r)):A(k)),"Historical"==Z&&("Invalid date"!=a?(t.map((e=>{I()(e.created_at).format("YYYY-MM-DD")>=a&&I()(e.created_at).format("YYYY-MM-DD")<=s&&r.push(e)})),L(r)):L(R))}else A(k),L(q)},settabSelected:V,POsortPNflag:_t,onSortpoTable:e=>{let t=x,a=R,s=y;if("PN"==e)if("Asc"==_t){Ot("Desc");let e=t.sort(((e,t)=>{let a=e.po_num.toLowerCase(),s=t.po_num.toLowerCase();return a>s?-1:a<s?1:0}));A(e)}else{Ot("Asc");let e=t.sort(((e,t)=>{let a=e.po_num.toLowerCase(),s=t.po_num.toLowerCase();return s>a?-1:s<a?1:0}));A(e)}if("RA"==e)if("Asc"==Dt){It("Desc");let e=t.sort(((e,t)=>e.created_at>t.created_at?1:t.created_at>e.created_at?-1:0));A(e)}else{It("Asc");let e=t.sort(((e,t)=>t.created_at>e.created_at?1:e.created_at>t.created_at?-1:0));A(e)}if("SC"==e)if("Asc"==Yt){Mt("Desc");let e=t.sort(((e,t)=>e.code>t.code?1:t.code>e.code?-1:0));A(e)}else{Mt("Asc");let e=t.sort(((e,t)=>t.code>e.code?1:e.code>t.code?-1:0));A(e)}if("STATUS"==e)if("Asc"==da){pa("Desc");let e=t.sort(((e,t)=>e.status>t.status?1:t.status>e.status?-1:0));A(e)}else{pa("Asc");let e=t.sort(((e,t)=>t.status>e.status?1:e.status>t.status?-1:0));A(e)}if("PNh"==e)if("Asc"==Ft){Ut("Desc");let e=a.sort(((e,t)=>{let a=e.po_num.toLowerCase(),s=t.po_num.toLowerCase();return a>s?-1:a<s?1:0}));L(e)}else{Ut("Asc");let e=a.sort(((e,t)=>{let a=e.po_num.toLowerCase(),s=t.po_num.toLowerCase();return s>a?-1:s<a?1:0}));L(e)}if("RAh"==e)if("Asc"==qt){Wt("Desc");let e=a.sort(((e,t)=>e.created_at>t.created_at?1:t.created_at>e.created_at?-1:0));L(e)}else{Wt("Asc");let e=a.sort(((e,t)=>t.created_at>e.created_at?1:e.created_at>t.created_at?-1:0));L(e)}if("SCh"==e)if("Asc"==Zt){Vt("Desc");let e=a.sort(((e,t)=>e.code>t.code?1:t.code>e.code?-1:0));L(e)}else{Vt("Asc");let e=a.sort(((e,t)=>t.code>e.code?1:e.code>t.code?-1:0));L(e)}if("PNap"==e)if("Asc"==Kt){Xt("Desc");let e=s.sort(((e,t)=>{let a=e.po_num.toLowerCase(),s=t.po_num.toLowerCase();return a>s?-1:a<s?1:0}));P(e)}else{Xt("Asc");let e=s.sort(((e,t)=>{let a=e.po_num.toLowerCase(),s=t.po_num.toLowerCase();return s>a?-1:s<a?1:0}));P(e)}if("RAap"==e)if("Asc"==aa){sa("Desc");let e=s.sort(((e,t)=>e.created_at>t.created_at?1:t.created_at>e.created_at?-1:0));P(e)}else{sa("Asc");let e=s.sort(((e,t)=>t.created_at>e.created_at?1:e.created_at>t.created_at?-1:0));P(e)}if("SCap"==e)if("Asc"==la){na("Desc");let e=s.sort(((e,t)=>e.code>t.code?1:t.code>e.code?-1:0));P(e)}else{na("Asc");let e=s.sort(((e,t)=>t.code>e.code?1:e.code>t.code?-1:0));P(e)}},POsortPN:St,POsortSC:Rt,POsortSCflag:Yt,POsortRA:kt,POsortRAflag:Dt,POsortSTATUS:ca,POsortSTATUSflag:da,POsortPNh:Et,POsortPNflagh:Ft,POsortSCflagh:Zt,POsortSCh:Qt,POsortRAh:zt,POsortRAflagh:qt,POsortPNap:Gt,POsortPNflagap:Kt,POsortSCflagap:la,POsortSCap:ra,POsortRAap:ea,POsortRAflagap:aa,AllPOs:x,ApprovalPending:y,OnPoSelected:Wa,POAction:e=>{"1"==e.status&&"ApprovalPending"==Z&&jt(!0);const t={code:e.code,created_at:e.created_at,created_by:e.created_by,notes:e.notes,po_id:e.po_id,po_num:e.po_num,status:"".concat(0==e.status?1:1==e.status?2:2==e.status?3:(e.status,0)),supplier_id:e.supplier_id},a={status:"".concat(0==e.status?1:1==e.status?2:2==e.status?3:(e.status,0))};try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/update-po/").concat(e.po_id),{method:"put",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){200==e.status&&e.json().then((function(e){1==e.success?(b.Ay.success(e.message),"ApprovalPending"==Z&&V("Latest"),Ta(!1),Ea(),Ba(),Ta(!0),Wa(t)):b.Ay.success(e.data)}))})).catch((function(e){console.log("Fetch Error :-S",e)}))}catch(s){console.log("ERR>>>",s)}},loadingPOItems:o,AllPOItem:ue,PONumberSelected:Se,onDownloadCsv:Ha,showbuttons:ht,openModal:function(){d([0]),h(!0)},showModal:e=>{ot(!0),it(e)},showModalDownload:e=>{nt(!0)},AllPOHistorical:R,AllPOItemH:ge,AllPOItemApprovalPending:Ae,AllPOItemTableApprovalPendiong:fe,PONumberSelectedApprovalPending:ke,PONumberSelectedH:_e,POQ:at,POPr:et,ApprovalPendingShowPoItem:_a,showbuttonsapproval:ut,HideApprovalPendingPoItem:bt,polistLoader:gt,ToolTipApprovedBy:ha,ToolTipApprovedAt:ua,ToolTipDownloadBy:ba,ToolTipDownloadAt:ga,IsDownloaded:Aa,setAllPOs:A}),(0,c.jsx)(i,{data:Ra,graphFlag:ka,data1:Da,options:{responsive:!0,legend:{display:!1},type:"bar",barPercentage:1,aspectRatio:1,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Suppliers"}},y:{title:{display:!0,text:"PO Values"}}}}}),(0,c.jsx)(v.A,{title:"",visible:rt,onOk:()=>{(e=>{let t=e;l(!1);try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/remove-poitem/").concat(t.po_item_id),{method:"put",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status?e.json().then((function(e){b.Ay.success(e.message),Wa({po_id:t.poid,po_num:Se}),l(!1)})):a(!1)})).catch((function(e){a(!1)}))}catch(s){a(!1)}})(ct),ot(!1)},onCancel:()=>{ot(!1)},cancelText:"No",okText:"Yes",children:(0,c.jsx)("p",{children:" Are you sure to remove PO Item from this PO?"})}),(0,c.jsx)(v.A,{title:"",visible:lt,onCancel:Ja,footer:0==Aa&&"2"==va?[(0,c.jsx)(w.A,{type:"primary",loading:t,onClick:Qa,children:"Yes"},"submit"),(0,c.jsx)(w.A,{type:"primary",loading:t,onClick:()=>{za(fa,0),Ha(),ya(!0),nt(!1),Ca(!0);const e=setTimeout((()=>{window.location.reload()}),2e3);clearTimeout(e)},children:"No"}),(0,c.jsx)(w.A,{onClick:Ja,children:"Cancel"},"back")]:[(0,c.jsx)(w.A,{type:"primary",loading:t,onClick:Qa,children:"Yes"},"submit"),(0,c.jsx)(w.A,{type:"primary",loading:t,onClick:Ja,children:"No"})],children:0==Aa&&"2"==va?(0,c.jsxs)("p",{children:['You are going to download the csv for this PO. Would you like to mark this PO as "COMPLETED"?'," "]}):0==Aa&&"3"==va?(0,c.jsx)("p",{children:" Would you like to download this PO? "}):1==Aa&&"2"==va?(0,c.jsxs)("p",{children:["Po is already dowloaded would you like to download it again and mark this po as 'Completed'?"," "]}):(0,c.jsx)("p",{children:" PO is already downloded would you like to download it again? "})}),(0,c.jsx)(v.A,{centered:!0,destroyOnClose:!0,visible:p,onOk:qa,onCancel:qa,footer:null,width:1080,children:(0,c.jsxs)(B.A,{onFinish:e=>{void 0!=vt&&localStorage.setItem("spid",vt);let t=new Array;n.map(((a,s)=>{let r={product_id:"".concat(e.prodCode[s]),supplier_id:void 0!=vt?vt:localStorage.getItem("spid"),quantity:"".concat(e.qty[s]),price:"".concat(e.price[s])};t.push(r)}));let s={poitems:t};var r=dt;try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/add-po-items/").concat(r),{method:"post",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){e.json().then((function(e){if(e){Pt(localStorage.getItem("spid")),a(!1),Je(""),Ve(""),We(""),b.Ay.success(e.message),Ea(),h(!1);Wa({po_id:r,po_num:Se})}})),204==e.status&&(Je(""),Ve(""),We(""))})).catch((function(e){a(!1)}))}catch(o){}},layout:"vertical",children:[(0,c.jsx)("div",{className:"text-center mb-13",children:(0,c.jsxs)("h1",{className:"mb-1",style:{color:"rgb(138, 38, 80)"},children:["Add Po items for ",Se]})}),(0,c.jsx)("div",{className:"row",children:n.map(((e,t)=>(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)(f.A,{spinning:m,children:(0,c.jsx)(N.A,{span:24,offset:1,children:(0,c.jsx)(F.A,{style:{borderRadius:10,marginTop:"2%"},children:(0,c.jsxs)(g.A,{children:[(0,c.jsxs)(N.A,{span:22,children:[(0,c.jsx)(g.A,{children:(0,c.jsx)(N.A,{span:24,children:(0,c.jsx)(B.A.Item,{name:["aggCode",t],label:"Aggregate Code",rules:[{required:!0,message:"Please select aggregate code"}],children:(0,c.jsx)(M.A,{placeholder:"Please Select Code",showSearch:!0,onChange:e=>(e=>{let t=e.split("-")[0];$e(t),Ie(t),He(!1);try{fetch("".concat(O.u.MAIN_ENDPOINT,"/api/get-product-codes/").concat(t),{method:"get",headers:{Authorization:"Bearer ".concat(J),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){let t=new Array;e.data.map((e=>{let a={value:e.product_code,label:e.product_code,key:e.prod_id};t.push(a)})),se(t)}))})).catch((function(e){console.log("Fetch Error :-S",e),a(!1)}))}catch(s){console.log("ERR>>>",s)}})(e),children:K.map((e=>(0,c.jsx)(H,{value:e.value,children:e.label},e.value)))})})})}),(0,c.jsxs)(g.A,{children:[(0,c.jsx)(N.A,{span:11,children:(0,c.jsx)(B.A.Item,{name:["prodCode",t],label:"Product Code",rules:[{required:!0,message:"Please select product code"}],children:(0,c.jsx)(M.A,{placeholder:"Please Select Code",showSearch:!0,optionFilterProp:"children",children:ae.map((e=>(0,c.jsx)(H,{value:e.key,children:e.label},e.key)))})})}),(0,c.jsx)(N.A,{span:1}),(0,c.jsx)(N.A,{span:11,children:(0,c.jsx)(B.A.Item,{name:["suppCode",t],label:"Supplier Code",initialValue:ft,rules:[{required:!0,message:"Please select supplier code"}],children:(0,c.jsx)(E.A,{disabled:!0})})})]}),(0,c.jsxs)(g.A,{children:[(0,c.jsx)(N.A,{span:11,children:(0,c.jsx)(B.A.Item,{name:["qty",t],label:"Quantity",rules:[{required:!0,message:"Please enter quantity"}],children:(0,c.jsx)(U.A,{min:1,style:{width:"100%"}})})}),(0,c.jsx)(N.A,{span:1}),(0,c.jsx)(N.A,{span:11,children:(0,c.jsx)(B.A.Item,{name:["price",t],label:"Price",rules:[{required:!0,message:"Please enter price"}],children:(0,c.jsx)(U.A,{min:0,style:{width:"100%"}})})})]})]}),(0,c.jsx)(N.A,{span:1}),(0,c.jsx)(N.A,{span:1,style:{marginTop:"23%"},children:0!=t&&(0,c.jsxs)(w.A,{shape:"circle",onClick:()=>function(e){u(!0);let t=new Array;new Array,t=n,t.map(((a,s)=>{s==e&&t.splice(s,1)})),setTimeout((function(){u(!1)}),100)}(t),children:[(0,c.jsx)(C.aO,{path:"/media/icons/duotune/arrows/arr090.svg",className:"svg-icon-3"})," "]})})]})})})})})))}),(0,c.jsxs)(g.A,{children:[(0,c.jsx)(w.A,{type:"primary",shape:"circle",style:{margin:"2%"},onClick:()=>function(){u(!0);let e=new Array;new Array,e=n,e.push(Q),d(e),Q++;const t=setTimeout((function(){u(!1)}),100);clearTimeout(t)}(),icon:(0,c.jsx)(z.A,{})})," "]}),(0,c.jsx)(g.A,{children:(0,c.jsxs)(w.A,{type:"primary",htmlType:"submit",style:{borderRadius:"5px"},children:[" ","Submit"," "]})})]})})]})})}))},57284:(e,t,a)=>{a.d(t,{A:()=>r});class s{static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}}s.addZero=e=>{if(null==e)return e;{const t=e;if(!t||""==t||null==t)return;return"."==(null===t||void 0===t?void 0:t.charAt(0))?"0"+t:e}};const r=s}}]);
//# sourceMappingURL=229.8b31d82a.chunk.js.map
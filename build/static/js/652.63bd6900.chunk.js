"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[652],{62652:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var s=t(65043),c=t(97),n=t(424),l=t(99442),r=t(15627),d=t(30460),i=t(48414),o=t(94539),m=t(86178),h=t.n(m),x=t(44864),p=t(70579);let u="",b="";const g=(0,l.y)((()=>{const e=(0,c.A)(),[a,t]=(0,s.useState)(!1),[l,m]=(0,s.useState)(!1),[g,j]=(0,s.useState)([]),[N,f]=(0,s.useState)([]),[v,y]=(0,s.useState)(""),[w,A]=(0,s.useState)(""),[k,T]=(0,s.useState)({});(0,s.useEffect)((()=>{m(!0),S()}),[]);const S=()=>{try{fetch("".concat(x.u.MAIN_ENDPOINT,"/api/tags"),{method:"get",headers:{Authorization:"Bearer ".concat(b),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200!=e.status&&(localStorage.clear(),window.location.reload()),e.json().then((function(e){j(e.data),f(e.data),m(!1)}))})).catch((function(e){}))}catch(e){}};return b=JSON.parse(localStorage.getItem("portalUserDataToken")||""),u=JSON.parse(localStorage.getItem("portalUserDataRole")||""),(0,p.jsx)(s.Fragment,{children:1==l?(0,p.jsx)(s.Fragment,{children:(0,p.jsx)(d.A,{loading:l,active:!0})}):(0,p.jsxs)(s.Fragment,{children:[(0,p.jsxs)("ol",{className:"breadcrumb breadcrumb-dot fs-6 fw-bold",style:{margin:"1%"},children:[(0,p.jsx)(n.N_,{to:"/home",className:"pe-1 cursor-pointer",children:(0,p.jsx)("li",{className:"breadcrumb-item pe-1",children:"Home"})}),"/ \xa0",(0,p.jsx)("li",{className:"breadcrumb-item pe-3",children:"Tag Management"})]}),(0,p.jsx)(i.sT,{breadcrumbs:[],children:e.formatMessage({id:"MENU.DASHBOARD"})}),(0,p.jsx)("div",{className:"row g-5 gx-xxl-8",style:{marginTop:"1%"},children:(0,p.jsx)("div",{className:"col-xxl-12",children:(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card-header border-0 pt-2",children:[(0,p.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,p.jsx)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:"Tags"})}),(0,p.jsx)("div",{className:"card-toolbar",children:(0,p.jsx)("input",{type:"search",onChange:e=>{let a=e.target.value,t=new Array;g.map(((e,s)=>{e.name.toLowerCase().includes(a.toLowerCase())&&t.push(e)})),j(t),""==a&&j(N)},className:"form-control form-control-solid",placeholder:"Search by  Tag Name"})}),(0,p.jsx)("div",{className:"card-toolbar"}),"Administrator"==u&&(0,p.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Click to add new Tag",children:(0,p.jsxs)("button",{type:"button",className:"btn btn-sm btn-primary","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end","data-kt-menu-flip":"top-end","data-bs-toggle":"modal","data-bs-target":"#add_tag",children:[(0,p.jsx)(o.aO,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-3"}),"New Tag"]})})]}),(0,p.jsx)("div",{className:"card-body py-3",children:(0,p.jsx)("div",{className:"table-responsive h-600px table-scroll",children:(0,p.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,p.jsx)("th",{className:"w-25px"}),(0,p.jsx)("th",{className:"min-w-100px",children:"Tag"}),(0,p.jsx)("th",{className:"min-w-100px",children:"Created At"}),"Administrator"==u&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("th",{className:"min-w-50px text-end",children:"Status"}),(0,p.jsx)("th",{className:"min-w-30px text-end",children:"Edit"})]})]})}),(0,p.jsx)("tbody",{children:void 0!=g&&g.map((e=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{}),(0,p.jsx)("td",{children:1==e.mapped?(0,p.jsx)(n.N_,{to:{pathname:"/tagDetails",state:e},children:(0,p.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.name})}):(0,p.jsx)(p.Fragment,{children:e.name})}),(0,p.jsx)("td",{children:(0,p.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:h()(e.created_at).format("DD-MMM-YYYY")})}),"Administrator"==u&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("td",{children:(0,p.jsx)("div",{className:"d-flex justify-content-end flex-shrink-0",children:(0,p.jsx)("div",{className:"form-check form-switch",title:1==e.is_deleted?"Activate Tag":"Deactivate Tag",children:(0,p.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:1!=e.is_deleted,onChange:()=>(e=>{m(!0);try{fetch("".concat(x.u.MAIN_ENDPOINT,"/api/delete-tag/").concat(e.tag_id),{method:"delete",headers:{Authorization:"Bearer ".concat(b),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){r.Ay.success(e.message),S(),A(""),m(!1)}))})).catch((function(e){m(!1)}))}catch(a){console.log("ERR>>>",a)}})(e)})})})}),(0,p.jsx)("td",{children:(0,p.jsx)("div",{className:"d-flex justify-content-end flex-shrink-0",children:(0,p.jsx)("button",{className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1","data-kt-menu-trigger":"click","data-bs-toggle":"modal","data-bs-target":"#edit_tag",onClick:()=>{return A((a=e).name),void T(a);var a},children:(0,p.jsx)(o.aO,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})})})})]})]})))})]})})})]})})}),(0,p.jsx)("div",{className:"modal fade",id:"add_tag","aria-hidden":"true",children:(0,p.jsx)("div",{className:"modal-dialog mw-650px",children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsx)("div",{className:"modal-header pb-0 border-0 justify-content-end",children:(0,p.jsx)("div",{className:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal",children:(0,p.jsx)(o.aO,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})}),(0,p.jsxs)("div",{className:"modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15",children:[(0,p.jsx)("div",{className:"text-center mb-13",children:(0,p.jsx)("h1",{className:"mb-3",children:"Add New Tag"})}),(0,p.jsxs)("form",{className:"tag-form",children:[(0,p.jsxs)("div",{className:"fv-row mb-10",children:[(0,p.jsx)("label",{className:"form-label fs-6 fw-bolder required text-dark text-left",children:"Tag :"}),(0,p.jsx)("input",{type:"input",value:v,onChange:e=>y(e.target.value),onFocus:()=>t(!1),className:"form-control form-control-solid",placeholder:""}),1==a?(0,p.jsx)("span",{role:"alert",className:"text-danger",children:"Tag Name is Required"}):null]}),(0,p.jsx)("button",{type:"button",onClick:()=>{if(""!=v){const a={name:"".concat(v)};m(!0);try{fetch("".concat(x.u.MAIN_ENDPOINT,"/api/create-tag"),{method:"post",headers:{Authorization:"Bearer ".concat(b),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){e.json().then((function(e){S(),y(""),m(!1),r.Ay.success(e.message)})),204==e.status&&(S(),A(""),m(!1),r.Ay.error("Tag Already Exist !"))})).catch((function(e){m(!1)}))}catch(e){}$("#add_tag").modal("hide")}else t(!0)},className:"btn btn-primary",children:"Submit"})]})]})]})})}),(0,p.jsx)("div",{className:"modal fade",id:"edit_tag","aria-hidden":"true",children:(0,p.jsx)("div",{className:"modal-dialog mw-650px",children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsx)("div",{className:"modal-header pb-0 border-0 justify-content-end",children:(0,p.jsx)("div",{className:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal",children:(0,p.jsx)(o.aO,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})}),(0,p.jsxs)("div",{className:"modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15",children:[(0,p.jsx)("div",{className:"text-center mb-13",children:(0,p.jsx)("h1",{className:"mb-3",children:"Edit Tags"})}),(0,p.jsxs)("form",{className:"tag-form",children:[(0,p.jsxs)("div",{className:"fv-row mb-10",children:[(0,p.jsx)("label",{className:"form-label fs-6 fw-bolder required text-dark text-left",children:"Tag :"}),(0,p.jsx)("input",{type:"input",value:w,onChange:e=>A(e.target.value),onFocus:()=>t(!1),className:"form-control form-control-solid",placeholder:""}),1==a?(0,p.jsx)("span",{role:"alert",className:"text-danger",children:"Tag Name is Required"}):null]}),(0,p.jsx)("button",{type:"button",onClick:()=>{if(""!=w){m(!0);const a={name:"".concat(w)};try{fetch("".concat(x.u.MAIN_ENDPOINT,"/api/update-tag/").concat(k.tag_id),{method:"put",headers:{Authorization:"Bearer ".concat(b),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){e.json().then((function(e){1==e.success&&(r.Ay.success(e.message),S(),A(""),m(!1))})),204==e.status&&(S(),A(""),m(!1),r.Ay.error("Tag Already Exist !"))})).catch((function(e){m(!1),S()}))}catch(e){console.log("ERR>>>",e)}$("#edit_tag").modal("hide")}else t(!0)},className:"btn btn-primary",children:"Submit"})]})]})]})})})]})})}))}}]);
//# sourceMappingURL=652.63bd6900.chunk.js.map
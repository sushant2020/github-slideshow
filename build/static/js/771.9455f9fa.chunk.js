"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[771],{56771:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var a=s(65043),r=s(94406),c=s(15627),o=s(30460),i=s(89421),n=s(82217),l=s(50289),d=s(5397),p=s(11645),u=s(26655),h=s(47419),m=s(60521),x=s(3428),j=s(94539),g=s(424),b=s(99442),N=s(5766),f=s.n(N),y=s(44864),v=s(10804),S=s(86178),A=s.n(S),w=s(57284),P=s(70579);const _=e=>{let t="";const{onSearchProduct:s,productloader:r,onSortProductTable:c,ProductSortAggrigate:i,ProductSortProductcode:n,ProductSortDescription:l,ProductSortPrice:p,ProductSortNegotiatedPrice:u,ProductSortPriceFromDate:h,ProductSortPriceUntilDate:m,ProductSortForecast:x,supplierDetails:b,onSuppData:N,suppHeader:f,supplierId:S,UniqueValue:_,UniqueValue2:k,onPriceSubmit:C,PriceValue:D,setPriceValue:O,onCloseprice:T,onPriceSelect:I,row_count:R,current:G,handleTableChange:z,columnName:E,loadingProduct:F}=e;return t=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,P.jsx)("div",{className:"row g-5 gx-xxl-8",id:"priceNego",children:(0,P.jsx)("div",{className:"col-xxl-12",children:(0,P.jsx)("div",{className:"card-xxl-stretch mb-4 mb-xxl-8",children:(0,P.jsx)("div",{className:"row gy-5 g-xl-4",children:(0,P.jsxs)("div",{className:"card",children:[(0,P.jsxs)("div",{className:"card-header border-0 pt-2",children:[(0,P.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,P.jsxs)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:["Products",(0,P.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",(0,P.jsx)("sub",{className:"",style:{color:"black"},children:"(Latest pricing record of this supplier)"})]})]})}),(0,P.jsx)("div",{className:"d-none d-sm-none d-md-block",children:(0,P.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,P.jsx)("input",{type:"search",onChange:s,className:"form-control form-control-solid",placeholder:"Search Aggregate / Product code ",tabIndex:2})})}),(0,P.jsx)("div",{className:"d-sm-block d-md-none",children:(0,P.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,P.jsx)("input",{type:"search",onChange:s,className:"form-control form-control-solid",placeholder:"Search Aggregate / Product code ",tabIndex:2})})})]}),(0,P.jsx)("div",{className:"card-body py-3 ",children:(0,P.jsx)("div",{className:"table-responsive h-800px table-scroll ",children:(0,P.jsx)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-1 main-table",children:1==F?(0,P.jsx)(a.Fragment,{children:(0,P.jsxs)(d.A,{spinning:F,size:"large",tip:"loading...",children:[(0,P.jsx)(o.A,{loading:F,active:!0}),(0,P.jsx)(o.A,{loading:F,active:!0}),(0,P.jsx)(o.A,{loading:F,active:!0})]})}):(0,P.jsxs)(a.Fragment,{children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,P.jsx)("th",{className:"w-100px"}),(0,P.jsxs)("th",{className:"min-w-80px",onClick:()=>c("productcode"),children:["Aggregate Code"," ","Desc"!=i?(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})," "]}),(0,P.jsxs)("th",{className:"min-w-70px",onClick:()=>c("child_code"),children:["Product Code","Desc"!=n?(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-100px",onClick:()=>c("description"),children:["Description","Desc"!=l?(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-50px",onClick:()=>c("price"),children:["Price","Desc"!=p?(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-100px",onClick:()=>c("price_from_date"),children:["Price From Date","Desc"!=h?(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-100px",onClick:()=>{c("price_untill_date")},children:["Price Until Date","Desc"!=m?(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-50px",onClick:()=>{c("forecast")},children:["Forecast","Desc"!=x?(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary cursor-pointer",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsx)("th",{className:"min-w-70px",onClick:()=>{c("Comment")},children:"Comment"})]})}),(0,P.jsx)("tbody",{children:void 0!=b&&""!=b&&b.map((e=>(0,P.jsxs)("tr",{className:1==e.is_visited?"bg-color-custome1":"",children:[(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Add po",children:(0,P.jsxs)("button",{type:"button",className:"btn btn-sm btn-light-primary",onClick:()=>N(e),children:[(0,P.jsx)(j.aO,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-3"}),"PO"]})})}),(0,P.jsx)("td",{onClick:s=>{!function(e){let s={pricing_id:e.pcid};try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/store-visited-pricingitem-mapping"),{method:"post",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){200==e.status&&e.json().then((function(e){}))})).catch((function(e){}))}catch(a){console.log("ERR>>>",a)}}(e)},children:(0,P.jsx)(g.N_,{to:{pathname:"/product",state:{prod_id:e.product_id,data:f,price:e.price,forecast:e.forecast,product_code:e.child_code,negotiated_price:e.negotiated_price,supplierId:S}},children:(0,P.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.productcode})})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.child_code?e.child_code:"-"})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.description})}),(0,P.jsx)("td",{children:_==e.pcid?(0,P.jsx)("form",{className:"price",onSubmit:t=>C(t,e),children:(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsx)("input",{type:"text",style:{width:"80%"},value:"."==D.charAt(0)?"0"+D:D,onChange:e=>O(e.target.value),className:"form-control form-control-solid",placeholder:""}),(0,P.jsx)("span",{style:{cursor:"pointer",marginTop:"5%"},children:(0,P.jsx)("div",{onClick:t=>T(t,e),children:(0,P.jsx)(j.aO,{path:"/media/icons/duotune/general/gen034.svg",className:"svg-icon-3"})})})]})}):(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary cursor-pointer d-block fs-6",onClick:()=>I(e),children:"."==e.price.charAt(0)?"0"+e.price:e.price})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:w.A.addZero(e.negotiated_price)})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:A()(e.price_from_date).format("DD-MMM-YYYY")})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:A()(e.price_untill_date).format("DD-MMM-YYYY")})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:(0,P.jsx)("td",{children:"."==e.forecast.charAt(0)?"0"+e.forecast:e.forecast})})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.comments?e.comments:"-"})})]})))})]})})})}),void 0!=R&&R>30&&(0,P.jsx)(v.A,{defaultPageSize:30,size:"small",defaultCurrent:G,total:R,onChange:z,style:{margin:"2%"},showQuickJumper:!0,hideOnSinglePage:!0,showSizeChanger:!1})]})})})})})};s(86904);var k=s(28671),C=s.n(k);const D=e=>{const{suppHeader:t,onSearchPO:s,onSortpoTable:a,POsortPN:r,POsortPNflag:c,POsortRA:o,POsortRAflag:n,POsortSTATUS:l,POsortSTATUSflag:u,supplierPO:m,OnPoSelected:x,loadingPOItems:b,PONumberSelected:N,AllPOItem:f,onDownloadCsv:y,showbuttons:v,ToolTipApprovedBy:S,ToolTipApprovedAt:_,ToolTipDownloadBy:k,ToolTipDownloadAt:D,showModalDownload:O,ShowHide:T}=e;return(0,P.jsx)("div",{className:"row g-5 gx-xxl-8",children:(0,P.jsx)("div",{className:"col-xxl-12",children:(0,P.jsx)("div",{className:"card-xxl-stretch mb-5 mb-xxl-8",children:(0,P.jsx)("div",{className:"row gy-5 g-xl-4",children:(0,P.jsxs)("div",{className:"card",children:[(0,P.jsxs)("div",{className:"card-header border-0 pt-2",children:[(0,P.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,P.jsxs)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:["PO List for ",t.code,(0,P.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",(0,P.jsx)("sub",{className:"",style:{color:"black"},children:"(Last 5 weeks)"})]})]})}),(0,P.jsx)("div",{className:"d-none d-sm-none d-md-block",children:(0,P.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,P.jsx)("input",{type:"search",onChange:s,className:"form-control form-control-solid",placeholder:"Search by PO Number / Raised By"})})}),(0,P.jsx)("div",{className:"d-sm-block d-md-none",children:(0,P.jsx)("div",{className:"",style:{width:"100%"},children:(0,P.jsx)("input",{type:"search",onChange:s,className:"form-control form-control-solid",placeholder:"Search by PO Number / Raised By"})})}),(0,P.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Click to Download List as CSV",style:{display:"none"},id:"csv-button"}),(0,P.jsx)("div",{className:"card-toolbar","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-trigger":"hover",title:"Click to Create New PO"})]}),(0,P.jsx)("div",{className:"card-body py-3 ",children:(0,P.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,P.jsx)("div",{className:"tab-pane fade show active",id:"latestPO",role:"tabpanel",children:(0,P.jsxs)(h.A,{children:[(0,P.jsx)(p.A,{span:12,children:(0,P.jsx)("div",{className:"table-responsive h-350px table-scroll",children:(0,P.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,P.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>a(r),children:["PO-Number"," ","Desc"!=c?(0,P.jsx)(j.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsx)("th",{className:"min-w-50px cursor-pointer",children:"Supplier Code"}),(0,P.jsx)("th",{className:"min-w-100px cursor-pointer",children:"Raised By"}),(0,P.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>a(o),children:["Raised At"," ","Desc"!=n?(0,P.jsx)(j.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-80px cursor-pointer",onClick:()=>a(l),children:["Status"," ","Desc"!=u?(0,P.jsx)(j.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary",path:"/media/icons/duotune/arrows/arr068.svg"})]})]})}),(0,P.jsx)("tbody",{children:void 0!=m&&m.map((e=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link cursor-pointer",onClick:()=>x(e),children:e.po_num})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.code})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_by?e.created_by:"-"})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.created_at?A()(e.created_at).format("DD-MMM-YYYY"):"-"})}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"d-flex flex-shrink-0",children:"0"==e.status?(0,P.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-warning fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"In Progress"}):"1"==e.status?(0,P.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-danger fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"APRROVAL PENDING"}):"2"==e.status?(0,P.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-primary fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"APPROVED"}):"3"==e.status?(0,P.jsx)("button",{className:"btn btn-text btn-color-light btn-bg-success fw-bold btn-sm me-1 min-w-100px",style:{cursor:"text"},children:"Complete"}):""})})]})))})]})})}),(0,P.jsx)(p.A,{span:11,offset:1,children:1==T?(0,P.jsx)("div",{className:"table-responsive h-350px",children:b?(0,P.jsx)("div",{style:{margin:"25% 50% 50% 50%"},children:(0,P.jsx)(d.A,{tip:"Loading...",size:"large",style:{justifyContent:"center"}})}):(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[f.length>0&&(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,P.jsx)("th",{className:"w-20px",children:(0,P.jsx)(i.A,{type:"dashed",style:{color:"rgb(138, 38, 80)",cursor:"text"},children:N})}),(0,P.jsx)("th",{className:"min-w-100px"}),(0,P.jsx)("th",{className:"min-w-70px"}),(0,P.jsx)("th",{className:"min-w-70px"})]})}),(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,P.jsx)("th",{className:"min-w-100px",children:"Supplier"}),(0,P.jsx)("th",{className:"min-w-100px",children:"Product Code"}),(0,P.jsx)("th",{className:"min-w-100px",children:"Product Description"}),(0,P.jsx)("th",{className:"min-w-70px",children:"Quantity"}),(0,P.jsx)("th",{className:"min-w-70px",children:"Price"})]})}),(0,P.jsx)("tbody",{children:void 0!=f&&f.map((e=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6 cursor-text",children:e.supplier})}),(0,P.jsx)("td",{children:(0,P.jsx)(g.N_,{to:{pathname:"/product",state:{prod_id:e.prod_id}},children:(0,P.jsx)("span",{className:"text-danger fw-bolder text-hover-primary d-block fs-6 text-decoration-underline link",children:e.product_code?e.product_code:"-"})})}),(0,P.jsx)("td",{children:(0,P.jsx)(C(),{lines:1,more:"Show more",less:"Show less",anchorClass:"",children:e.desc?e.desc:"-"})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.quantity})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:w.A.addZero(e.price)})})]})))})]})})}):""})]})})})})]})})})})})},O=e=>{const{GrnSortPrice:t,onSortGrnTable:s,GrnSortQty:a,supplierGrn:r,supplierId:c,GRNPr:o,GRNQ:i,GrnSortProductCode:n,GRNProductCode:l,GrnSortProductDiscription:d,GRNProductDiscription:p,GrnSortPackSize:u,GRNPackSize:h,GrnSortGrnNo:m,GRNGrnNo:x,GrnSortRecieptDate:b,GRNRecieptDate:N}=e;return(0,P.jsx)("div",{className:"row g-5 gx-xxl-8",children:(0,P.jsx)("div",{className:"col-xxl-12",children:(0,P.jsx)("div",{className:"card-xxl-stretch mb-5 mb-xxl-8",children:(0,P.jsx)("div",{className:"row gy-5 g-xl-4",children:(0,P.jsxs)("div",{className:"card",children:[(0,P.jsxs)("div",{className:"card-header border-0 pt-2",children:[(0,P.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,P.jsxs)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:["GRN"," ",(0,P.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",(0,P.jsxs)("sub",{className:"",style:{color:"black"},children:["(Current month data filtered by"," ",(0,P.jsx)("span",{style:{color:"rgb(138, 38, 80)"},children:"Reciept date"})," )"]})]})]})}),(0,P.jsx)("div",{className:"card-toolbar"})]}),(0,P.jsxs)("div",{className:"card-body py-3",children:[(0,P.jsx)("div",{className:"table-responsive h-350px table-scroll",children:(0,P.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4 main-table",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"fw-bolder text-muted",children:[(0,P.jsx)("th",{className:"w-25px"}),(0,P.jsxs)("th",{className:"min-w-100px cursor-pointer",onClick:()=>s(l),children:["Product Code","Desc"!=n?(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-100px cursor-pointer",onClick:()=>s(p),children:["Product Description","Desc"!=d?(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-100px cursor-pointer",onClick:()=>s(h),children:["Pack Size","Desc"!=u?(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsx)("th",{className:"min-w-100px cursor-pointer",children:"Supplier Code"}),(0,P.jsxs)("th",{className:"min-w-100px cursor-pointer",onClick:()=>s(x),children:["GRN No","Desc"!=m?(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-80px",onClick:()=>s(o),children:["GRN Price"," ","Desc"!=t?(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-70px",onClick:()=>s(i),children:["GRN Qty","Desc"!=a?(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]}),(0,P.jsxs)("th",{className:"min-w-100px cursor-pointer ",onClick:()=>s(N),children:["Reciept Date","Desc"!=b?(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr062.svg"}):(0,P.jsx)(j.aO,{className:"text-hover-primary ",path:"/media/icons/duotune/arrows/arr068.svg"})]})]})}),(0,P.jsx)("tbody",{children:void 0!=r&&r.map(((e,t)=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.Product_Code})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.Product_Desc})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.Pack_Size})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.Supplier_Code})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.Grn_No})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:w.A.addZero(e.price)})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:e.Grn_Qty})}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"text-dark fw-bolder text-hover-primary d-block fs-6",children:A()(e.Receipt_Date).format("DD-MMM-YYYY")})})]})))})]})}),r.length>5&&(0,P.jsx)(g.N_,{to:{pathname:"/supplier-grn",state:{id:c}},className:"pe-1 ",children:(0,P.jsx)("button",{className:"btn btn-sm btn-primary",children:"View More"})})]})]})})})})})},{Option:T}=r.A;let I="",R=0;const G=(0,b.y)((function(e){const[t,s]=(0,a.useState)(!1),[b,N]=(0,a.useState)(!1),[v,S]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[C,G]=(0,a.useState)([]),[z,E]=(0,a.useState)([]),[F,M]=(0,a.useState)([]),[B,L]=(0,a.useState)([]),[q,Y]=(0,a.useState)(""),[U,V]=(0,a.useState)([]),[Q,H]=(0,a.useState)(!1),[J,W]=(0,a.useState)(!1),[Z,K]=(0,a.useState)(!1),[X,ee]=(0,a.useState)([]),[te,se]=(0,a.useState)([]),[ae,re]=(0,a.useState)([]),[ce,oe]=(0,a.useState)([]),[ie,ne]=(0,a.useState)([]),[le,de]=(0,a.useState)([]),[pe,ue]=(0,a.useState)([]),[he,me]=(0,a.useState)([]),[xe,je]=(0,a.useState)({}),[ge,be]=(0,a.useState)(!1),[Ne,fe]=(0,a.useState)(""),[ye,ve]=(0,a.useState)(""),[Se,Ae]=(0,a.useState)(""),[we,Pe]=(0,a.useState)(!1),[_e,ke]=(0,a.useState)(!1),[Ce,De]=(0,a.useState)(!1),[Oe,Te]=(0,a.useState)(!1),[Ie,Re]=(0,a.useState)(""),[Ge,ze]=(0,a.useState)(""),[Ee,Fe]=(0,a.useState)(""),[Me,Be]=(0,a.useState)(""),[Le,qe]=(0,a.useState)({}),[Ye,Ue]=(0,a.useState)([]),[Ve,Qe]=(0,a.useState)(!1),[He,Je]=(0,a.useState)([]),[We,Ze]=(0,a.useState)(""),[$e,Ke]=(0,a.useState)([]),[Xe,et]=(0,a.useState)(4055),[tt,st]=(0,a.useState)(!1),[at,rt]=(0,a.useState)("Asc"),[ct,ot]=(0,a.useState)("Asc"),[it,nt]=(0,a.useState)([]),[lt,dt]=(0,a.useState)("Price"),[pt,ut]=(0,a.useState)("Qty"),[ht,mt]=(0,a.useState)("Asc"),[xt,jt]=(0,a.useState)("GRNProductCode"),[gt,bt]=(0,a.useState)("Asc"),[Nt,ft]=(0,a.useState)("GRNProductDiscription"),[yt,vt]=(0,a.useState)("Asc"),[St,At]=(0,a.useState)("PackSize"),[wt,Pt]=(0,a.useState)("Asc"),[_t,kt]=(0,a.useState)("GrnNo"),[Ct,Dt]=(0,a.useState)("Asc"),[Ot,Tt]=(0,a.useState)("RecieptDate"),[It,Rt]=(0,a.useState)("Asc"),[Gt,zt]=(0,a.useState)("Asc"),[Et,Ft]=(0,a.useState)("Asc"),[Mt,Bt]=(0,a.useState)("Asc"),[Lt,qt]=(0,a.useState)("Asc"),[Yt,Ut]=(0,a.useState)("Asc"),[Vt,Qt]=(0,a.useState)("Asc"),[Ht,Jt]=(0,a.useState)("Asc"),[Wt,Zt]=(0,a.useState)("PN"),[$t,Kt]=(0,a.useState)("ASC"),[Xt,es]=(0,a.useState)("RA"),[ts,ss]=(0,a.useState)("ASC"),[as,rs]=(0,a.useState)("STATUS"),[cs,os]=(0,a.useState)("ASC"),[is,ns]=(0,a.useState)(""),[ls,ds]=(0,a.useState)(""),[ps,us]=(0,a.useState)(""),[hs,ms]=(0,a.useState)(""),[xs,js]=(0,a.useState)(!1),[gs,bs]=(0,a.useState)(!1),[Ns,fs]=(0,a.useState)(""),[ys,vs]=(0,a.useState)(""),[Ss,As]=(0,a.useState)(1),[ws,Ps]=(0,a.useState)(0),[_s,ks]=(0,a.useState)(1),[Cs,Ds]=(0,a.useState)(""),[Os,Ts]=(0,a.useState)(""),[Is,Rs]=(0,a.useState)("price_from_date"),[Gs,zs]=(0,a.useState)(!1),[Es,Fs]=(0,a.useState)(!1);function Ms(e,t,a,r){S(!0);try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/supplier-details/").concat(e,"/").concat(t,"/").concat(r,"/").concat(a),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status?e.json().then((function(e){K(!1),s(!1),je(e.data.supplier),ee(e.data.pricing),As(e.data.rowCount),se(e.data.pricing),et(localStorage.getItem("supplierid")),S(!1)})):s(!1)})).catch((function(e){s(!1),K(!1)}))}catch(c){}}function Bs(){try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/supplier-po-details/").concat(localStorage.getItem("supplierid")),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status?e.json().then((function(e){K(!1),s(!1),oe(e.data.po),ne(e.data.po),et(localStorage.getItem("supplierid")),K(!1)})):s(!1)})).catch((function(e){s(!1),K(!1)}))}catch(e){}}function Ls(e){switch(Rs(e),Ps(0==ws?1:0),e){case"productcode":"Asc"==It?(Ms(localStorage.getItem("supplierid"),_s,ws,e),Rt("Desc")):(Ms(localStorage.getItem("supplierid"),_s,ws,e),Rt("Asc"));break;case"child_code":"Asc"==Gt?(zt("Desc"),Ms(localStorage.getItem("supplierid"),_s,ws,e)):(zt("Asc"),Ms(localStorage.getItem("supplierid"),_s,ws,e));break;case"description":"Asc"==Et?(Ft("Desc"),Ms(localStorage.getItem("supplierid"),_s,ws,e)):(Ft("Asc"),Ms(localStorage.getItem("supplierid"),_s,ws,e));break;case"price":"Asc"==Mt?(Bt("Desc"),Ms(localStorage.getItem("supplierid"),_s,ws,e)):(Bt("Asc"),Ms(localStorage.getItem("supplierid"),_s,ws,e));break;case"negotiated_price":"Asc"==Lt?(qt("Desc"),Ms(localStorage.getItem("supplierid"),_s,ws,e)):(qt("Asc"),Ms(localStorage.getItem("supplierid"),_s,ws,e));break;case"price_from_date":"Asc"==Yt?(Ut("Desc"),Ms(localStorage.getItem("supplierid"),_s,ws,e)):(Ut("Asc"),Ms(localStorage.getItem("supplierid"),_s,ws,e));break;case"price_untill_date":"Asc"==Vt?(Qt("Desc"),Ms(localStorage.getItem("supplierid"),_s,ws,e)):(Qt("Asc"),Ms(localStorage.getItem("supplierid"),_s,ws,e));break;case"forecast":"Asc"==Ht?(Jt("Desc"),Ms(localStorage.getItem("supplierid"),_s,ws,e)):(Jt("Asc"),Ms(localStorage.getItem("supplierid"),_s,ws,e))}}(0,a.useEffect)((()=>{if(Es)return;e.location.state;localStorage.setItem("supplierid",void 0!=e.location.state?e.location.state.id:Xe),s(!0),N(!0),S(!0),be(!1),fe(""),ve(""),Ae(""),ue([]),Ls("price_from_date"),Ps(0),Ms(localStorage.getItem("supplierid"),_s,ws,Is),Bs(),me([]),function(){try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/get-ac-products"),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200!=e.status)return localStorage.clear(),void window.location.reload();e.json().then((function(e){let t=new Array;e.data.ac4.map(((e,s)=>{let a={value:e.parent_product_code,label:e.parent_product_code};t.push(a)})),Ke(t)}))})).catch((function(e){s(!1)}))}catch{}}(),setTimeout((()=>{qs()}),1e3),Fs(!0)}),[]),$("#priceNego").click((function(){}));const qs=()=>{try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/supplier-grn-data/").concat(localStorage.getItem("supplierid")),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){re(e.data.grn),nt(e.data.grn),N(!1)}))})).catch((function(e){s(!1)}))}catch(e){}},Ys=e=>{zs(!0),vs(e.po_id),fs(e.status),0==e.status||1==e.status?st(!1):st(!0);let t=e;k(!0),"1"==e.is_downloaded?(bs(!0),ns(e.verified_by),ds(e.verified_at),us(e.updated_by),ms(e.updated_at)):(bs(!1),ns(e.verified_by),ds(e.verified_at),us(""),ms(""));try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/get-poitems/").concat(e.po_id),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status?e.json().then((function(e){M(e.data),L(e.data),Y(t.po_num),Ze(t.po_id),k(!1),s(!1)})):s(!1)})).catch((function(e){s(!1)}))}catch(a){s(!1)}},Us=(t,s)=>{if(ve(""),Ae(""),""!=Ne&&"onSubmit"==t._reactName){t.preventDefault();const r={pricing_id:"".concat(s.pcid),ac4:"".concat(s.productcode),product_code:"".concat(s.child_code),source_id:"".concat(s.source_id),supplier_id:"".concat(s.supplier_id),negotiated_price:"".concat(Ne)};let o=JSON.stringify(r);try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/update-negotiated-price"),{method:"post",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"},body:o}).then((t=>{t.json().then((function(t){t.status,c.Ay.success(t.message),Ms(void 0!=e.location.state?e.location.state.id:Xe,_s,ws,Is),Bs()}))})).catch((function(e){console.log("Request failed",e)}))}catch(a){console.log("Error Catch:::",a)}}else be(!1)},Vs=()=>{let e=new Array;z.length>0?z.map((t=>{let s={po_number:q,supplier:t.supplier,product_code:t.product_code,quantity:t.quantity,price:t.price};e.push(s)})):F.map((t=>{let s={po_number:q,supplier:t.supplier,product_code:t.product_code,quantity:t.quantity,price:t.price};e.push(s)}));var t,s={fields:["po_number","supplier","product_code","quantity","price"],data:e.length>0?e:[]},a=f().unparse(s),r=new Blob([a],{type:"text/csv;charset=utf-8;"});t=window.URL.createObjectURL(r);var c=document.createElement("a");c.href=t,c.setAttribute("download","".concat(q,".csv")),c.click(),E([])},Qs=()=>{Vs(),bs(!0),js(!1)},Hs=()=>{js(!1)},Js=()=>{Pe(!1),ke(!1),Te(!1),De(!1),H(!1),R=0,V([])};return I=JSON.parse(localStorage.getItem("portalUserDataToken")||""),(0,P.jsx)(a.Fragment,{children:1==t?(0,P.jsxs)(a.Fragment,{children:[(0,P.jsx)(o.A,{loading:t,active:!0}),(0,P.jsx)(o.A,{loading:t,active:!0})]}):(0,P.jsxs)(a.Fragment,{children:[(0,P.jsx)("div",{className:"d-none d-sm-none d-md-block",children:(0,P.jsx)("div",{className:"row gy-5 gx-xl-4",children:(0,P.jsx)("input",{type:"search",style:{zIndex:"500",position:"fixed",top:"-8px",width:"30%"},onChange:e=>{let t=e.target.value;new Array;if(""==t||0==t)me([]);else if(t.length>=2)try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/search-supplier/").concat(t),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){me(e.supplier)}))})).catch((function(e){console.log("Fetch Error :-S",e)}))}catch(s){console.log("ERR>>>",s)}},className:"form-control ",placeholder:"Search by Supplier",tabIndex:5})})}),(0,P.jsxs)("ol",{className:"breadcrumb breadcrumb-dot fs-6 fw-bold",style:{marginTop:he.length>0?"390px":"70px",marginBottom:"10px"},tabIndex:-1,children:[(0,P.jsx)(g.N_,{to:"/home",className:"pe-1 cursor-pointer",children:(0,P.jsx)("li",{className:"breadcrumb-item pe-1",children:"Home"})}),"/ \xa0",(0,P.jsx)("li",{className:"breadcrumb-item pe-3",children:"Supplier"})]}),(0,P.jsx)("div",{className:"toolbar",id:"kt_toolbar",style:{height:he.length>0?"390px":""},children:(0,P.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-column",children:[(0,P.jsx)("div",{className:"d-none d-sm-none d-md-block",children:(0,P.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-stack",children:[(0,P.jsx)("div",{className:"d-flex align-items-center py-5 justify-content-space-between ",children:(0,P.jsx)("a",{className:"btn btn-outline btn-outline-dashed m-1",style:{cursor:"text"},children:(0,P.jsx)("span",{className:"card-label fs-2 mb-1 text-purple header-custom",style:{color:"rgb(138, 38, 80)"},children:null!=xe.name?xe.name:""})})}),(0,P.jsx)("div",{className:"d-flex align-items-center py-5 justify-content-space-between"}),(0,P.jsx)("div",{className:"d-flex align-items-center py-5 justify-content-space-between",children:(0,P.jsx)("a",{className:"btn btn-outline btn-outline-dashed m-1",style:{cursor:"text"},children:(0,P.jsx)("span",{className:"card-label fs-2 mb-1 text-purple header-custom",style:{color:"rgb(138, 38, 80)"},children:null!=xe.code?xe.code:" "})})})]})}),(0,P.jsx)("div",{className:" d-sm-block d-md-none",children:(0,P.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-stack",children:[(0,P.jsx)("div",{className:"d-flex align-items-center py-5 justify-content-space-between ",children:(0,P.jsx)("a",{className:"btn btn-outline btn-outline-dashed m-1",style:{cursor:"text"},children:(0,P.jsx)("span",{className:"card-label fs-5 mb-1 text-purple header-custom",style:{color:"rgb(138, 38, 80)"},children:null!=xe.name?xe.name:""})})}),(0,P.jsx)("div",{className:"d-flex align-items-center py-5 justify-content-space-between"}),(0,P.jsx)("div",{className:"d-flex align-items-center py-5 justify-content-space-between",children:(0,P.jsx)("a",{className:"btn btn-outline btn-outline-dashed m-1",style:{cursor:"text"},children:(0,P.jsx)("span",{className:"card-label fs-5 mb-1 text-purple header-custom",style:{color:"rgb(138, 38, 80)"},children:null!=xe.code?xe.code:" "})})})]})}),he.length>0?(0,P.jsx)("div",{className:"card",tabIndex:1,children:(0,P.jsx)("div",{className:"table-responsive h-300px",children:he.map((e=>(0,P.jsx)("div",{className:"d-flex align-items-center mb-1 p-1",children:(0,P.jsx)("div",{className:"flex-grow-1",children:(0,P.jsxs)(i.A,{type:"primary",className:" btn-light-primary",onClick:()=>(e=>{let t=e;if(et(t.id),localStorage.setItem("supplierid",t.id),s(!0),N(!0),ks(1),zs(!1),new Array,""==t||0==t)me([]);else{try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/supplier-details/").concat(t.id,"/").concat(_s,"/price/").concat(ws),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){1==e.ok&&e.json().then((function(e){me(e.data),ee(e.data.pricing),je(e.data.supplier),As(e.data.rowCount),Rt("Asc"),zt("Asc"),Ft("Asc"),Bt("Asc"),qt("Asc"),Ut("Asc"),Qt("Asc"),Jt("Asc"),Ls("price_from_date"),Ps(0),s(!1),K(!1)}))})).catch((function(e){console.log("Fetch Error :-S",e),s(!1)}))}catch(a){console.log("ERR>>>",a)}setTimeout((()=>{try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/supplier-grn-data/").concat(t.id),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){1==e.ok&&e.json().then((function(e){re(e.data.grn),N(!1)}))})).catch((function(e){console.log("Fetch Error :-S",e),s(!1)}))}catch(a){console.log("ERR>>>",a)}}),1e3),setTimeout((()=>{try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/supplier-po-details/").concat(t.id),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){1==e.ok&&e.json().then((function(e){K(!1),s(!1),oe(e.data.po),ne(e.data.po)}))})).catch((function(e){console.log("Fetch Error :-S",e),s(!1)}))}catch(a){console.log("ERR>>>",a)}}),1e3)}})(e),children:[e.code," \xa0\xa0\xa0\xa0 ",e.name]})})})))})}):null]})}),(0,P.jsx)(_,{onSearchProduct:(e,t)=>{let s=e.target.value,a=new Array;X.map(((e,t)=>{(e.productcode.toLowerCase().includes(s.toLowerCase())||e.child_code.toLowerCase().includes(s.toLowerCase()))&&a.push(e)})),ee(a),""==s&&ee(te)},productloader:Z,onSortProductTable:Ls,ProductSortAggrigate:It,ProductSortProductcode:Gt,ProductSortDescription:Et,ProductSortPrice:Mt,ProductSortNegotiatedPrice:Lt,ProductSortPriceFromDate:Yt,ProductSortPriceUntilDate:Vt,ProductSortForecast:Ht,supplierDetails:X,onSuppData:e=>{qe(e),Be(e.child_code),Ds(e.price),Ts(e.negotiated_price),0==R&&(U.push(R),R++),H(!0);try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/get-product-codes/").concat(e.productcode),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){let t=new Array;e.data.map((e=>{let s={value:e.prod_id,label:e.product_code};t.push(s)})),de(t)}))})).catch((function(e){console.log("Fetch Error :-S",e),s(!1)}))}catch(t){console.log("ERR>>>",t)}},suppHeader:xe,supplierId:Xe,UniqueValue:ye,UniqueValue2:Se,onPriceSubmit:Us,PriceValue:Ne,setPriceValue:fe,onCloseprice:(e,t)=>{Us(e,t)},onPriceSelect:e=>{be(!1),ve(e.pcid),Ae(e.pcid),be(!1),fe(e.price)},row_count:Ss,current:_s,sortflag:ws,columnName:Is,handleTableChange:t=>{Ms(void 0!=e.location.state?e.location.state.id:Xe,t,ws,Is),ks(t)},loadingProduct:v}),(0,P.jsx)(D,{suppHeader:xe,onSearchPO:(e,t)=>{let s=e.target.value,a=new Array;ce.map(((e,t)=>{(e.po_num.toLowerCase().includes(s.toLowerCase())||e.created_by.toLowerCase().includes(s.toLowerCase()))&&a.push(e)})),oe(a),""==s&&oe(ie)},onSortpoTable:function(e){let t=ce;if("PN"==e)if("Asc"==$t){Kt("Desc");let e=t.sort((function(e,t){return e.po_num.toLowerCase()<t.po_num.toLowerCase()?1:-1}));oe(e)}else{Kt("Asc");let e=t.sort((function(e,t){return e.po_num.toLowerCase()>t.po_num.toLowerCase()?1:-1}));oe(e)}if("RA"==e)if("Asc"==ts){ss("Desc");let e=t.sort((function(e,t){return e.created_at<t.created_at?1:-1}));oe(e)}else{ss("Asc");let e=t.sort((function(e,t){return e.created_at>t.created_at?1:-1}));oe(e)}if("STATUS"==e)if("Asc"==cs){os("Desc");let e=t.sort(((e,t)=>e.status>t.status?1:t.status>e.status?-1:0));oe(e)}else{os("Asc");let e=t.sort(((e,t)=>t.status>e.status?1:e.status>t.status?-1:0));oe(e)}},POsortPN:Wt,POsortPNflag:$t,POsortRA:Xt,POsortRAflag:ts,POsortSTATUS:as,POsortSTATUSflag:cs,supplierPO:ce,OnPoSelected:Ys,loadingPOItems:w,PONumberSelected:q,AllPOItem:F,onDownloadCsv:Vs,showbuttons:tt,ToolTipApprovedBy:is,ToolTipApprovedAt:ls,ToolTipDownloadBy:ps,ToolTipDownloadAt:hs,showModalDownload:e=>{js(!0)},ShowHide:Gs}),1==b?(0,P.jsx)(o.A,{loading:b,active:!0}):(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(O,{GrnSortPrice:at,onSortGrnTable:function(e){let t=it,s=it;if("Price"==e){if("Asc"==at){rt("Desc");let e=t.sort((function(e,t){return e.price<t.price?1:-1}));nt(e)}if("Desc"==at){rt("Asc");let e=t.sort((function(e,t){return e.price>t.price?1:-1}));nt(e)}}if("Qty"==e){if("Asc"==ct){ot("Desc");let e=s.sort(((e,t)=>parseFloat(e.Grn_Qty)-parseFloat(t.Grn_Qty)));nt(e)}if("Desc"==ct){ot("Asc");let e=s.sort(((e,t)=>parseFloat(t.Grn_Qty)-parseFloat(e.Grn_Qty)));nt(e)}}if("GRNProductCode"==e){if("Asc"==ht){mt("Desc");let e=s.sort(((e,t)=>e.Product_Code.localeCompare(t.Product_Code,"en",{numeric:!0})));nt(e)}if("Desc"==ht){mt("Asc");let e=s.sort(((e,t)=>t.Product_Code.localeCompare(e.Product_Code,"en",{numeric:!0})));nt(e)}}if("GRNProductDiscription"==e){if("Asc"==gt){bt("Desc");let e=s.sort(((e,t)=>t.Product_Desc>e.Product_Desc?1:e.Product_Desc>t.Product_Desc?-1:0));nt(e)}if("Desc"==gt){bt("Asc");let e=s.sort(((e,t)=>e.Product_Desc>t.Product_Desc?1:t.Product_Desc>e.Product_Desc?-1:0));nt(e)}}if("PackSize"==e){if("Asc"==yt){vt("Desc");let e=s.sort(((e,t)=>parseFloat(e.Pack_Size)-parseFloat(t.Pack_Size)));nt(e)}if("Desc"==yt){vt("Asc");let e=s.sort(((e,t)=>parseFloat(t.Pack_Size)-parseFloat(e.Pack_Size)));nt(e)}}if("GrnNo"==e){if("Asc"==wt){Pt("Desc");let e=s.sort(((e,t)=>parseFloat(t.Grn_No)-parseFloat(e.Grn_No)));nt(e)}if("Desc"==wt){Pt("Asc");let e=s.sort(((e,t)=>parseFloat(e.Grn_No)-parseFloat(t.Grn_No)));nt(e)}}if("RecieptDate"==e){if("Asc"==Ct){Dt("Desc");let e=s.sort(((e,t)=>A()(e.Receipt_Date).unix()-A()(t.Receipt_Date).unix()));nt(e)}if("Desc"==Ct){Dt("Asc");let e=s.sort(((e,t)=>A()(t.Receipt_Date).unix()-A()(e.Receipt_Date).unix()));nt(e)}}},GrnSortQty:ct,supplierGrn:ae,supplierId:Xe,GRNPr:lt,GRNQ:pt,GrnSortProductCode:ht,GRNProductCode:xt,GrnSortProductDiscription:gt,GRNProductDiscription:Nt,GrnSortPackSize:yt,GRNPackSize:St,GrnSortGrnNo:wt,GRNGrnNo:_t,GrnSortRecieptDate:Ct,GRNRecieptDate:Ot})}),(0,P.jsx)(n.A,{centered:!0,destroyOnClose:!0,visible:Q,onOk:Js,onCancel:Js,footer:null,width:1080,children:(0,P.jsxs)(l.A,{onFinish:e=>{let t=new Array;U.map(((s,a)=>{let r={product_id:"".concat(Le.product_id),supplier_id:"".concat(Le.supplier_id),quantity:"".concat(e.qty[a]),price:"".concat(e.price[a])};t.push(r)}));let a={poitems:t};try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/create-po-items"),{method:"post",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){e.json().then((function(e){e&&(s(!1),ze(""),Fe(""),Re(""),c.Ay.success(e.message),function(){try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/allpos"),{method:"get",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status?e.json().then((function(e){G(e.data.latest),V(e.data.latest),oe(e.data.latest),ne(e.data.latest),Ue(e.data.latest),s(!1),R=0,V([])})):s(!1)})).catch((function(e){s(!1)}))}catch(e){s(!1)}}(),H(!1),R=0,V([]))})),204==e.status&&(ze(""),Fe(""),Re(""))})).catch((function(e){s(!1)}))}catch(r){}},layout:"vertical",children:[(0,P.jsx)("div",{className:"text-center mb-13",children:(0,P.jsxs)("h1",{className:"mb-1",style:{color:"rgb(138, 38, 80)"},children:["Add Po item"," "]})}),(0,P.jsx)(a.Fragment,{children:U.map(((e,t)=>(0,P.jsx)(d.A,{spinning:J,children:(0,P.jsx)(p.A,{span:24,offset:1,children:(0,P.jsxs)(u.A,{style:{borderRadius:10,marginTop:"2%"},children:[(0,P.jsxs)(h.A,{children:[(0,P.jsxs)(p.A,{span:22,children:[(0,P.jsx)(h.A,{children:(0,P.jsx)(p.A,{span:24,children:(0,P.jsx)(l.A.Item,{name:["aggCode",t],label:"Aggregate Code",initialValue:Le.productcode,rules:[{required:!0,message:"Please select aggregate code"}],children:(0,P.jsx)(m.A,{disabled:!0})})})}),(0,P.jsx)(h.A,{children:(0,P.jsx)(p.A,{span:24,children:(0,P.jsx)(l.A.Item,{name:["description",t],label:"Description",initialValue:Le.description,rules:[{required:!0,message:"Please select aggregate code"}],children:(0,P.jsx)(m.A,{disabled:!0})})})}),(0,P.jsxs)(h.A,{children:[(0,P.jsx)(p.A,{span:12,children:(0,P.jsx)(l.A.Item,{name:["prodCode",t],label:"Product Code",initialValue:""!=Le.child_code?Le.child_code:" ",rules:[{required:!0,message:"Please select aggregate code"}],children:""!=Le.child_code?(0,P.jsx)(m.A,{disabled:!0}):(0,P.jsx)(r.A,{placeholder:"Please select code",showSearch:!0,optionFilterProp:"children",children:le.map((e=>(0,P.jsx)(T,{value:e.value,children:e.label},e.value)))})})}),(0,P.jsx)(p.A,{span:1}),(0,P.jsx)(p.A,{span:11,children:(0,P.jsx)(l.A.Item,{name:["suppCode",t],label:"Supplier Code",initialValue:xe.code,rules:[{required:!0,message:"Please select supplier code"}],children:(0,P.jsx)(m.A,{disabled:!0})})})]}),(0,P.jsxs)(h.A,{children:[(0,P.jsx)(p.A,{span:12,children:(0,P.jsx)(l.A.Item,{name:["qty",t],label:"Quantity",rules:[{required:!0,message:"Please enter quantity"},{pattern:new RegExp(/^[0-9]+$/),message:"value is in number only"}],children:(0,P.jsx)(m.A,{min:1,style:{width:"100%"}})})}),(0,P.jsx)(p.A,{span:1}),(0,P.jsx)(p.A,{span:11,children:(0,P.jsx)(l.A.Item,{name:["price",t],label:"Price",initialValue:null==Os?Cs:Os,rules:[{required:!0,message:"Please enter price"}],children:(0,P.jsx)(x.A,{min:0,style:{width:"100%"}})})})]})]}),(0,P.jsx)(p.A,{span:1}),(0,P.jsx)(p.A,{span:1,children:0!=t&&(0,P.jsxs)(i.A,{shape:"circle",onClick:()=>(e=>{W(!0);let t=new Array;t=U,t.map(((s,a)=>{a==e&&t.splice(a,1)})),setTimeout((function(){W(!1)}),100)})(t),children:[(0,P.jsx)(j.aO,{path:"/media/icons/duotune/arrows/arr090.svg",className:"svg-icon-3"})," "]})})]}),(0,P.jsx)(h.A,{style:{margin:"10px"},children:(0,P.jsxs)(i.A,{type:"primary",htmlType:"submit",style:{borderRadius:"5px"},children:[" ","Submit"," "]})})]})})})))})]})}),(0,P.jsx)(n.A,{title:"",visible:Ve,onOk:()=>{(e=>{let t=e;k(!1);try{fetch("".concat(y.u.MAIN_ENDPOINT,"/api/remove-poitem/").concat(t.po_item_id),{method:"put",headers:{Authorization:"Bearer ".concat(I),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status?e.json().then((function(e){c.Ay.success(e.message);const s={po_id:t.poid,po_num:q};Ys(s),k(!1)})):s(!1)})).catch((function(e){s(!1)}))}catch(a){s(!1)}})(He),Qe(!1)},onCancel:()=>{Qe(!1)},cancelText:"No",okText:"Yes",children:(0,P.jsx)("p",{children:" Are you sure to remove PO Item from this PO?"})}),(0,P.jsx)(n.A,{title:"",visible:xs,onOk:Qs,onCancel:Hs,cancelText:"Cancel",okText:"Yes",footer:0==gs&&"2"==Ns?[(0,P.jsx)(i.A,{type:"primary",loading:t,onClick:Qs,children:"Yes"},"submit"),(0,P.jsx)(i.A,{type:"primary",loading:t,onClick:()=>{Vs(),js(!1)},children:"No"}),(0,P.jsx)(i.A,{onClick:Hs,children:"Cancel"},"back")]:[(0,P.jsx)(i.A,{type:"primary",loading:t,onClick:Qs,children:"Yes"},"submit"),(0,P.jsx)(i.A,{type:"primary",loading:t,onClick:Hs,children:"No"})],children:0==gs&&"2"==Ns?(0,P.jsxs)("p",{children:['You are going to download the csv for this PO. Would you like to mark this PO as "COMPLETED"?'," "]}):(0,P.jsx)("p",{children:" PO is already downloded would you like to download it again? "})})]})})}))},57284:(e,t,s)=>{s.d(t,{A:()=>r});class a{static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}}a.addZero=e=>{if(null==e)return e;{const t=e;if(!t||""==t||null==t)return;return"."==(null===t||void 0===t?void 0:t.charAt(0))?"0"+t:e}};const r=a}}]);
//# sourceMappingURL=771.9455f9fa.chunk.js.map
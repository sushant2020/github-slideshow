"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[375],{48375:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var r=a(65043),n=a(15627),o=a(67289),s=a(10804),d=a(94406),i=a(60521),c=a(64435),l=a(44864),h=a(57284),p=a(50525),u=a(50289),m=a(35696),A=a(89421),x=a(82217),y=a(78186),g=(a(8387),a(39998),a(86178)),f=a.n(g),C=(a(75337),a(70579));let N="",j="";N=JSON.parse(localStorage.getItem("portalUserDataToken")||""),j=JSON.parse(localStorage.getItem("portalUserDataRole")||"");var I=a(5766),S=a.n(I),O=a(424);let w=new Date,R=f()(w).format("DD-MM-YY");const{RangePicker:v}=p.A,D=()=>{const[e,t]=(0,r.useState)(!1),[a,p]=(0,r.useState)(!1),[g,N]=(0,r.useState)([]),[j,I]=(0,r.useState)([]),[w,v]=(0,r.useState)([]),[D,k]=(0,r.useState)(),[P,b]=(0,r.useState)([]),[T,E]=(0,r.useState)(!1),[F,G]=(0,r.useState)(3),[_,M]=(0,r.useState)(1),[Z,K]=(0,r.useState)(0),[B,z]=(0,r.useState)([]),Y=new FileReader,[L]=u.A.useForm(),[H,V]=(0,r.useState)(""),[q,U]=(0,r.useState)("Product_AC_4"),[W,J]=(0,r.useState)(0),[X,Q]=(0,r.useState)("GENERIC"),[$,ee]=(0,r.useState)(!1),[te,ae]=(0,r.useState)(!1),[re,ne]=(0,r.useState)(!1),[oe,se]=(0,r.useState)({columnKey:"ProductAC4",order:"ascend"});(0,r.useEffect)((()=>{ie(_)}),[X,oe,_]);let de="";const ie=async e=>{let a;t(!0),a="GENERIC"==X?"get-watchlist-catalog":"get-buyer-shortlisted",await fetch("".concat(l.u.MAIN_ENDPOINT,"/api/get-watchlist-catalog/").concat(e,"/").concat(oe.columnKey,"/").concat("ascend"==oe.order?1:0),{method:"get",headers:{Authorization:"Bearer ".concat(de),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200!=e.status&&N([]),e.json().then((function(e){1==e.success&&(e&&e.data&&e.data.products.map((e=>{e.key=e.Product_Id})),N(e.data.products),K(e.data.rowCnt))}))})).catch((function(e){console.log("Fetch Error :-S",e)})),fetch("".concat(l.u.MAIN_ENDPOINT,"/api/view-profile"),{method:"get",headers:{Authorization:"Bearer ".concat(de),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){localStorage.setItem("userId",e.data.userProfle.id)}))})).catch((function(e){})),t(!1)},ce=e=>{var t,a=S().unparse(e,{header:!1,columns:["Ranking","ProductAC4","SPOTCode","ProductDesc","PackSize","Cost","True Cost","Avg Cost","Avg Vol","comments","buyer_comments","c87","c122","DC","DG","RH","RBS","ATOZ","RRP","Phoenix","Trident","AAH","Colorama","Bestway"]}),r=S().unparse({fields:["RANKING","AGG CODE","SPOT CODE","DESCRIPTION","PACK","COST","TRUE COST","AVG COST","AVG VOL","SUPPLIERS COMMENTS","BUYER COMMENTS","87","122","DC","DG","RH","RBS","ATOZ","RRP","PHOENIX","TRIDENT","AAH","COLORAMA","BESTWAY"],data:[]}),n=new Blob([r+a],{type:"text/csv;charset=utf-8;"});t=window.URL.createObjectURL(n);var o=document.createElement("a");o.href=t,o.setAttribute("download","Generic_products-(".concat(f()(new Date).format("DDD-MMM-YYYY"),").csv")),o.click(),ae(!1)},le=[{title:"Ranking",dataIndex:"Ranking",key:"Ranking",sorter:!0,fixed:!0,width:100},{title:"Agg Code",dataIndex:"ProductAC4",key:"ProductAC4",sorter:!0,width:100},{title:"Spot Code",dataIndex:"SPOTCode",key:"SPOTCode",sorter:!0,width:100,render:(e,t)=>(0,C.jsx)(m.A,{placement:"topLeft",title:"View Historical Pricing",children:(0,C.jsx)(O.N_,{to:{pathname:"/product-details",state:{prod_id:t.ProductAC4,spotid:t.SPOTCode,spotCode:e}},children:e})})},{title:"Description",dataIndex:"ProductDesc",key:"ProductDesc",sorter:!0,width:300},{title:"Pack Size",dataIndex:"PackSize",key:"PackSize",width:100,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Cost",dataIndex:"Cost",key:"Cost",width:100,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"True Cost",dataIndex:"True Cost",key:"True Cost",width:100,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Avg Cost",dataIndex:"Avg Cost",key:"Avg Cost",width:100,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"Avg Vol",dataIndex:"Avg Vol",key:"Avg Vol",width:100,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"}),sorter:!0},{title:"COMPETITOR",children:[{},{title:"PHOENIX",dataIndex:"Phoenix",key:"Phoenix",sorter:!0,width:100,render:(e,t)=>e?(0,C.jsx)("div",{style:{background:"1"==t.phoenix_outofstock?"#FFFF00":"",padding:"5px 5px 5px 5px"},children:h.A.addZero(e)}):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"TRIDENT",dataIndex:"Trident",key:"Trident",sorter:!0,width:100,render:(e,t)=>e?(0,C.jsx)("div",{style:{background:"1"==t.trident_outofstock?"#FFFF00":"",padding:"5px 5px 5px 5px"},children:h.A.addZero(e)}):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"AAH",dataIndex:"AAH",key:"AAH",sorter:!0,width:100,render:(e,t)=>e?(0,C.jsx)("div",{style:{background:"1"==t.aah_outofstock?"#FFFF00":"",padding:"5px 5px 5px 5px"},children:h.A.addZero(e)}):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"COLORAMA",dataIndex:"Colorama",key:"Colorama",sorter:!0,width:100,render:(e,t)=>e?(0,C.jsx)("div",{style:{background:"1"==t.colorama_outofstock?"#FFFF00":"",padding:"5px 5px 5px 5px"},children:h.A.addZero(e)}):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"BESTWAY",dataIndex:"Bestway",key:"Bestway",sorter:!0,width:100,render:(e,t)=>e?(0,C.jsx)("div",{style:{background:"1"==t.bestway_outofstock?"#FFFF00":"",padding:"5px 5px 5px 5px"},children:h.A.addZero(e)}):(0,C.jsx)(C.Fragment,{children:"-"})}]},{title:"CONTRACTS",children:[{title:"RRP",dataIndex:"RRP",key:"RRP",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"ATOZ",dataIndex:"ATOZ",key:"ATOZ",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"87",dataIndex:"c87",key:"c87",sorter:!0,width:100,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"122",dataIndex:"c122",key:"c122",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"DC",dataIndex:"DC",key:"DC",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"DG",dataIndex:"DG",key:"DG",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"RH",dataIndex:"RH",key:"RH",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"RBS",dataIndex:"RBS",key:"RBS",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"RH Comment",dataIndex:"RBS",key:"RBS",width:100,sorter:!0,render:e=>e?h.A.addZero(e):(0,C.jsx)(C.Fragment,{children:"-"})},{title:"Supplier Comment",dataIndex:"supplier_comments",key:"supplier_comments",sorter:!0,width:200},{title:"Buyer Comment",dataIndex:"buyer_comments",key:"buyer_comments",sorter:!0,width:200}]}],he=e=>{k(null),e.preventDefault(),D&&(Y.onload=function(e){(e=>{const t=e.slice(0,e.indexOf("\n")).split(","),a=e.slice(e.indexOf("\n")+1).split("\n").map((e=>{const a=e.split(",");return t.reduce(((e,t,r)=>(e[t]=a[r],e)),{})}));b(a)})(e.target.result)},Y.readAsText(D))};Object.keys(Object.assign({},...P));de=JSON.parse(localStorage.getItem("portalUserDataToken")||"");const pe=[{title:"RANKING",dataIndex:"RANKING",key:"RANKING",width:20,render:e=>e&&e.match(/\./g)?(0,C.jsx)("span",{className:"text-dark fs-3 font-weight-bold badge badge-secondary ",children:e}):(0,C.jsx)(C.Fragment,{children:e})},{title:"AGGCODE",dataIndex:"AGGCODE",key:"AGGCODE",width:20},{title:"PRODCODE",dataIndex:"PRODCODE",key:"PRODCODE",width:20},{title:"DESCRIPTION",dataIndex:"DESCRIPTION",key:"DESCRIPTION",width:30}];return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"pt-4 m-2",children:(0,C.jsxs)("div",{className:"card p-4",children:[(0,C.jsx)("div",{className:"card-body py-3 ",children:(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-3",children:(0,C.jsx)("div",{className:"card-toolbar",style:{width:"100%"},children:(0,C.jsx)("h3",{className:"card-title align-items-start flex-column",children:(0,C.jsx)("span",{className:"card-label fw-bolder fs-3 mb-1",style:{color:"rgb(138, 38, 80)"},children:"Create Watch List (GENERIC)"})})})}),(0,C.jsx)("div",{className:"col-3"}),(0,C.jsxs)("div",{className:"col-3",children:[" ",(0,C.jsx)(m.A,{placement:"topLeft",title:"Download",children:(0,C.jsx)(A.A,{type:"primary",size:"large",loading:te,onClick:()=>{ae(!0),fetch("".concat(l.u.MAIN_ENDPOINT,"/api/download-product-catalog"),{method:"get",headers:{Authorization:"Bearer ".concat(de),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){200==e.status&&e.json().then((function(e){null!==e&&void 0!==e&&e.data&&ce(e.data)}))})).catch((function(e){ae(!1)}))},className:"m-1",children:"Download"})})]}),(0,C.jsx)("div",{className:"col-3",children:(0,C.jsxs)("div",{className:"text-center d-flex ",children:[(0,C.jsx)(m.A,{placement:"topLeft",title:"Search",children:(0,C.jsx)(A.A,{type:"primary",size:"large",onClick:()=>{ee(!0),L.resetFields(["file"]),p(!1),b([])},className:"m-1",children:"Search"})}),(0,C.jsx)(m.A,{placement:"topLeft",title:"Reset",children:(0,C.jsx)(A.A,{type:"primary",size:"large",onClick:()=>{ie(1)},className:"m-1",children:"Reset"})}),(0,C.jsx)(m.A,{placement:"topLeft",title:"Export Report",children:(0,C.jsx)(A.A,{type:"primary",size:"large",onClick:()=>{E(!0),L.resetFields(["file"]),p(!1),b([])},className:"m-1",children:"Create Watchlist"})})]})})]})}),(0,C.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,C.jsxs)("div",{className:"tab-pane fade show active ",id:X,role:"tabpanel",children:[(0,C.jsx)(o.A,{loading:e,columns:le,rowClassName:e=>""!=e.buyer_comments&&null!=e.buyer_comments?"bg-warning":"",dataSource:g,className:"p-4 m-2",size:"large",pagination:!1,scroll:{x:2400,y:600},onChange:(e,t,a,r)=>{se({...a})},rowKey:"Product_Id"}),(0,C.jsx)("div",{className:"row text-end m-4 p-2",children:(0,C.jsx)(s.A,{defaultCurrent:_,current:_,defaultPageSize:10,total:Z,onChange:e=>{M(e),ie(e)},hideOnSinglePage:!1,showSizeChanger:!1})})]})}),(0,C.jsxs)(x.A,{open:T,onCancel:()=>{E(!1)},footer:!1,destroyOnClose:!0,style:{minWidth:700},children:[(0,C.jsxs)(u.A,{name:"time_related_controls",onFinish:e=>{if(e.types||(e.types=F),B.length<=0&&(3==e.types||6==e.types||2==e.types))n.Ay.error("Please upload correct file ");else if((null===B||void 0===B?void 0:B.length)>0&&"Invalid date"==B[0].DATE)n.Ay.error("Invalid file");else if((3==e.types||6==e.types||2==e.types)&&null!=e.file&&void 0!=e.file&&B.length>0)p(!0),fetch("".concat(l.u.MAIN_ENDPOINT,"/api/import-watchlist/").concat(e.types),{method:"post",headers:{Authorization:"Bearer ".concat(de),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(B)}).then((function(e){200==e.status&&e.json().then((function(e){n.Ay.success(e.data),E(!1)}))})).catch((function(e){}));else{let t=new Array,a=localStorage.getItem("userId"),r=2==F?f()(e.daterange).format("YYYY-MM-DD"):R;j.map((e=>{t.push({product_id:e})}));let o={products:t,type:F,inserted_by:a,as_of_date:r};if(!(t.length>0))return n.Ay.error("Please select products to create watchlist"),void E(!1);fetch("".concat(l.u.MAIN_ENDPOINT,"/api/add-bulkproducts-watchlist"),{method:"post",headers:{Authorization:"Bearer ".concat(de),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){200==e.status&&e.json().then((function(e){I([]),E(!1),n.Ay.success(e.data),E(!1)}))})).catch((function(e){}))}},style:{maxWidth:600},form:L,children:[(0,C.jsx)(u.A.Item,{name:"types",label:"Types",children:(0,C.jsx)(d.A,{defaultValue:{value:"3",label:"RDS"},options:[{value:"3",label:"RDS"},{value:"2",label:"Preset for Office-Daily"},{value:"6",label:"Preset for Office - Twice a week"}],onChange:e=>{G(e),L.resetFields(["file"]),b([]),z([]),k(null)}})}),(3==F||6==F||2==F)&&(0,C.jsx)(u.A.Item,{name:"file",label:"Csv file",rules:[{required:!0,message:"csv file require"}],children:(0,C.jsx)(i.A,{name:"file",type:"file",accept:".csv",onChange:e=>{var t=new Array(7);t[0]="monday",t[1]="tuesday",t[2]="wednesday",t[3]="thursday",t[4]="friday",t[5]="saturday",t[6]="sunday",b([]),z([]),e&&e.target&&e.target.files[0]&&(k(e.target.files[0]),S().parse(e.target.files[0],{header:!0,skipEmptyLines:!0,complete:function(e){if(!e.data||e&&e.data&&0==e.data.length)return void n.Ay.error("This file is empty");var a=/\./g;let r=new Array;e&&e.data.map((e=>{if("daily"==e.RANKING&&2!=F&&localStorage.setItem("dateCsv",e.RANKING),"daily"!=e.RANKING&&2!=F&&6==F&&t.includes(e.RANKING.toLowerCase())&&localStorage.setItem("day",e.RANKING.toLowerCase()),e&&e.RANKING&&(e.RANKING.match(a)||"daily"==e.RANKING&&2==F))return localStorage.setItem("dateCsv","daily"==e.RANKING?R:e.RANKING.toLowerCase()),void V("daily"==e.RANKING?R:e.RANKING.toLowerCase());e.AGGCODE&&""!=e.AGGCODE&&(6==F?r.push({AGGCODE:e.AGGCODE,RANKING:e.RANKING,PRODCODE:e.PRODCODE,DAY:localStorage.getItem("day")}):r.push({AGGCODE:e.AGGCODE,RANKING:e.RANKING,PRODCODE:e.PRODCODE,DATE:f()(localStorage.getItem("dateCsv"),"DD.MM.YY").format("YYYY-MM-DD")}))})),z(r)}}))}})}),(0,C.jsx)(u.A.Item,{children:(0,C.jsxs)(c.A,{children:[(0,C.jsx)(A.A,{type:"primary",htmlType:"submit",loading:a,children:"Submit"}),(3==F||6==F||2==F)&&(0,C.jsxs)(C.Fragment,{children:[D&&(0,C.jsx)(A.A,{onClick:e=>{e.preventDefault(),he(e)},loading:a,children:"View CSV"}),(0,C.jsxs)(A.A,{children:[" ",(0,C.jsxs)("a",{href:6==F?"/media/logos/sample1.csv":"/media/logos/sample.csv",className:"text-dark",children:["Download Sample File"," "]})]})]})]})})]}),(3==F||6==F||2==F)&&P.length>0&&(0,C.jsx)(o.A,{dataSource:P,columns:pe,pagination:!1,scroll:{x:500,y:500}})]}),(0,C.jsx)(x.A,{open:$,onCancel:()=>{ee(!1)},footer:!1,destroyOnClose:!0,children:(0,C.jsxs)(u.A,{name:"time_related_controls",onFinish:e=>{var t={prodcode:e.productcode?e.productcode:"",isbuyercomment:1==re?1:0};fetch("".concat(l.u.MAIN_ENDPOINT,"/api/search-watchlist-catalog/1/Product_AC_4/1"),{method:"post",headers:{Authorization:"Bearer ".concat(de),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200!=e.status&&N([]),e.json().then((function(e){1==e.success&&(N(e.data.products),ee(!1),K(e.data.rowCnt))}))})).catch((function(e){console.log("Fetch Error :-S",e)})),E(!1)},style:{maxWidth:600},className:"p-4",children:[(0,C.jsx)(u.A.Item,{name:"productcode",label:"Product Code",children:(0,C.jsx)(i.A,{placeholder:"Search Product"})}),(0,C.jsx)(u.A.Item,{name:"isbuyercomment",label:"Shortlisted by buyer",children:(0,C.jsx)(y.A,{onChange:e=>{ne(e.target.checked)}})}),(0,C.jsx)(u.A.Item,{children:(0,C.jsx)(A.A,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})})})}},57284:(e,t,a)=>{a.d(t,{A:()=>n});class r{static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}}r.addZero=e=>{if(null==e)return e;{const t=e;if(!t||""==t||null==t)return;return"."==(null===t||void 0===t?void 0:t.charAt(0))?"0"+t:e}};const n=r},75337:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(89379),n=a(65043);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var s=a(22172),d=function(e,t){return n.createElement(s.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:o}))};const i=n.forwardRef(d)},39998:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(58168),n=a(64467),o=a(98139),s=a.n(o),d=a(65043),i=a(35296),c=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};const l=function(e){var t=d.useContext(i.QO),a=t.getPrefixCls,o=t.direction,l=e.prefixCls,h=e.type,p=void 0===h?"horizontal":h,u=e.orientation,m=void 0===u?"center":u,A=e.orientationMargin,x=e.className,y=e.children,g=e.dashed,f=e.plain,C=c(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),N=a("divider",l),j=m.length>0?"-".concat(m):m,I=!!y,S="left"===m&&null!=A,O="right"===m&&null!=A,w=s()(N,"".concat(N,"-").concat(p),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},"".concat(N,"-with-text"),I),"".concat(N,"-with-text").concat(j),I),"".concat(N,"-dashed"),!!g),"".concat(N,"-plain"),!!f),"".concat(N,"-rtl"),"rtl"===o),"".concat(N,"-no-default-orientation-margin-left"),S),"".concat(N,"-no-default-orientation-margin-right"),O),x),R=(0,r.A)((0,r.A)({},S&&{marginLeft:A}),O&&{marginRight:A});return d.createElement("div",(0,r.A)({className:w},C,{role:"separator"}),y&&"vertical"!==p&&d.createElement("span",{className:"".concat(N,"-inner-text"),style:R},y))}}}]);
//# sourceMappingURL=375.97032dd8.chunk.js.map